!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nodelink=e():t.nodelink=e()}(window,function(){return n={122:function(t,e,n){"use strict";n.r(e),n.d(e,"nodelink",function(){return r});var r={};n.r(r);var s={value:()=>{}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function l(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=s,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=i.prototype={constructor:o,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=l(i[n],t.name,e);else if(null==e)for(n in i)i[n]=l(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new o(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var a=i;function h(){}function d(t){return null==t?h:function(){return this.querySelector(t)}}function u(){return[]}function y(t){return null==t?u:function(){return this.querySelectorAll(t)}}function c(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function f(t){return function(){return this.matches(t)}}function g(e){return function(t){return t.matches(e)}}var p=Array.prototype.find;function m(){return this.firstElementChild}var _=Array.prototype.filter;function v(){return Array.from(this.children)}function w(t){return new Array(t.length)}function x(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}x.prototype={constructor:x,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function A(t,e,n,r,i,s){for(var o,a=0,l=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new x(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function b(t,e,n,r,i,s,o){for(var a,l,h=new Map,u=e.length,c=s.length,f=new Array(u),d=0;d<u;++d)(a=e[d])&&(f[d]=l=o.call(a,a.__data__,d,e)+"",h.has(l)?i[d]=a:h.set(l,a));for(d=0;d<c;++d)l=o.call(t,s[d],d,s)+"",(a=h.get(l))?((r[d]=a).__data__=s[d],h.delete(l)):n[d]=new x(t,s[d]);for(d=0;d<u;++d)(a=e[d])&&h.get(f[d])===a&&(i[d]=a)}function k(t){return t.__data__}function M(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var T="http://www.w3.org/1999/xhtml",S={svg:"http://www.w3.org/2000/svg",xhtml:T,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},N=function(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),S.hasOwnProperty(e)?{space:S[e],local:t}:t};var E=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function O(t,e){return t.style.getPropertyValue(e)||E(t).getComputedStyle(t,null).getPropertyValue(e)}function I(t){return t.trim().split(/^|\s+/)}function C(t){return t.classList||new P(t)}function P(t){this._node=t,this._names=I(t.getAttribute("class")||"")}function D(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function F(t,e){for(var n=C(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}P.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function L(){this.textContent=""}function R(){this.innerHTML=""}function H(){this.nextSibling&&this.parentNode.appendChild(this)}function U(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B(t){return((t=N(t)).local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===T&&t.documentElement.namespaceURI===T?t.createElement(n):t.createElementNS(e,n)}})(t)}function j(){return null}function z(){var t=this.parentNode;t&&t.removeChild(this)}function q(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function G(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function X(s){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],s.type&&e.type!==s.type||e.name!==s.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?t.length=r:delete this.__on}}}function Y(o,a,l){return function(){var t,e,n=this.__on,r=(e=a,function(t){e.call(this,t,this.__data__)});if(n)for(var i=0,s=n.length;i<s;++i)if((t=n[i]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=l),void(t.value=a);this.addEventListener(o.type,r,l),t={type:o.type,name:o.name,value:a,listener:r,options:l},n?n.push(t):this.__on=[t]}}function W(t,e,n){var r=E(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var V=[null];function $(t,e){this._groups=t,this._parents=e}function Z(){return new $([[document.documentElement]],V)}$.prototype=Z.prototype={constructor:$,select:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,h=r[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),h[u]=o);return new $(r,this._parents)},selectAll:function(t){t=("function"==typeof t?c:y)(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,h=0;h<l;++h)(o=a[h])&&(r.push(t.call(o,o.__data__,h,a)),i.push(o));return new $(r,i)},selectChild:function(t){return this.select(null==t?m:(e="function"==typeof t?t:g(t),function(){return p.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?v:(e="function"==typeof t?t:g(t),function(){return _.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new $(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,k);var n,r=e?b:A,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),h=new Array(o),u=0;u<o;++u){var c=i[u],f=s[u],d=f.length,g="object"==typeof(g=t.call(c,c&&c.__data__,u,i))&&"length"in g?g:Array.from(g),p=g.length,m=l[u]=new Array(p),y=a[u]=new Array(p);r(c,f,m,y,h[u]=new Array(d),g,e);for(var _,v,w=0,x=0;w<p;++w)if(_=m[w]){for(x<=w&&(x=w+1);!(v=y[x])&&++x<p;);_._next=v||null}}return(a=new $(a,i))._enter=l,a._exit=h,a},enter:function(){return new $(this._enter||this._groups.map(w),this._parents)},exit:function(){return new $(this._exit||this._groups.map(w),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=e&&(i=(i=e(i))&&i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],h=n[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f]||h[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new $(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];0<=--s;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||M;for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s){for(var o,a=e[s],l=a.length,h=i[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(h[u]=o);h.sort(t)}return new $(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=N(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):O(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=I(t+"");if(arguments.length<2){for(var r=C(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?D:F)(this,t)}}:e?function(t){return function(){D(this,t)}}:function(t){return function(){F(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?L:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?R:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(H)},lower:function(){return this.each(U)},append:function(t){var e="function"==typeof t?t:B(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:B(t),r=null==e?j:"function"==typeof e?e:d(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(z)},clone:function(t){return this.select(t?G:q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=s.length;if(!(arguments.length<2)){for(a=e?Y:X,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,h=0,u=a.length;h<u;++h)for(r=0,l=a[h];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return W(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return W(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};var K=Z,Q=function(t){return"string"==typeof t?new $([[document.querySelector(t)]],[document.documentElement]):new $([[t]],V)};var J=function(t,e,n){(t.prototype=e.prototype=n).constructor=t};function tt(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function et(){}var nt="\\s*([+-]?\\d+)\\s*",rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",st=/^#([0-9a-f]{3,8})$/,ot=new RegExp("^rgb\\("+[nt,nt,nt]+"\\)$"),at=new RegExp("^rgb\\("+[it,it,it]+"\\)$"),lt=new RegExp("^rgba\\("+[nt,nt,nt,rt]+"\\)$"),ht=new RegExp("^rgba\\("+[it,it,it,rt]+"\\)$"),ut=new RegExp("^hsl\\("+[rt,it,it]+"\\)$"),ct=new RegExp("^hsla\\("+[rt,it,it,rt]+"\\)$"),ft={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dt(){return this.rgb().formatHex()}function gt(){return this.rgb().formatRgb()}function pt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=st.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?mt(e):3===n?new vt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?yt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?yt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ot.exec(t))?new vt(e[1],e[2],e[3],1):(e=at.exec(t))?new vt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=lt.exec(t))?yt(e[1],e[2],e[3],e[4]):(e=ht.exec(t))?yt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ut.exec(t))?bt(e[1],e[2]/100,e[3]/100,1):(e=ct.exec(t))?bt(e[1],e[2]/100,e[3]/100,e[4]):ft.hasOwnProperty(t)?mt(ft[t]):"transparent"===t?new vt(NaN,NaN,NaN,0):null}function mt(t){return new vt(t>>16&255,t>>8&255,255&t,1)}function yt(t,e,n,r){return new vt(t=r<=0?e=n=NaN:t,e,n,r)}function _t(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof et?i:pt(i))?new vt((i=i.rgb()).r,i.g,i.b,i.opacity):new vt:new vt(t,e,n,null==r?1:r);var i}function vt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function wt(){return"#"+At(this.r)+At(this.g)+At(this.b)}function xt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function At(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function bt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new Mt(t,e,n,r)}function kt(t){if(t instanceof Mt)return new Mt(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof et)?pt(t):t))return new Mt;if(t instanceof Mt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=0<l&&l<1?0:o,new Mt(o,a,l,t.opacity)}function Mt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Tt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function St(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}J(et,pt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:dt,formatHex:dt,formatHsl:function(){return kt(this).formatHsl()},formatRgb:gt,toString:gt}),J(vt,_t,tt(et,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new vt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wt,formatHex:wt,formatRgb:xt,toString:xt})),J(Mt,function(t,e,n,r){return 1===arguments.length?kt(t):new Mt(t,e,n,null==r?1:r)},tt(et,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Mt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Mt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new vt(Tt(240<=t?t-240:120+t,n,e),Tt(t,n,e),Tt(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Nt=t=>()=>t;function Et(e,n){return function(t){return e+t*n}}function Ot(s){return 1==(s=+s)?It:function(t,e){return e-t?(n=t,r=e,i=s,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):Nt(isNaN(t)?e:t);var n,r,i}}function It(t,e){var n=e-t;return n?Et(t,n):Nt(isNaN(t)?e:t)}var Ct=function t(e){var o=Ot(e);function n(e,t){var n=o((e=_t(e)).r,(t=_t(t)).r),r=o(e.g,t.g),i=o(e.b,t.b),s=It(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=s(t),e+""}}return n.gamma=t,n}(1);function Pt(a){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o=0;o<n;++o)e=_t(t[o]),r[o]=e.r||0,i[o]=e.g||0,s[o]=e.b||0;return r=a(r),i=a(i),s=a(s),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e+""}}}Pt(function(o){var a=o.length-1;return function(t){var e=t<=0?t=0:1<=t?a-(t=1):Math.floor(t*a),n=o[e],r=o[e+1],i=0<e?o[e-1]:2*n-r,s=e<a-1?o[e+2]:2*r-n;return St((t-e/a)*a,i,n,r,s)}}),Pt(function(o){var a=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*a),n=o[(e+a-1)%a],r=o[e%a],i=o[(e+1)%a],s=o[(e+2)%a];return St((t-e/a)*a,n,r,i,s)}});var Dt=function(e,n){n=n||[];var r,i=e?Math.min(n.length,e.length):0,s=n.slice();return function(t){for(r=0;r<i;++r)s[r]=e[r]*(1-t)+n[r]*t;return s}};function Ft(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lt(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o=0;o<r;++o)i[o]=Xt(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(t){for(o=0;o<r;++o)s[o]=i[o](t);return s}}var Rt=function(e,n){var r=new Date;return e=+e,n=+n,function(t){return r.setTime(e*(1-t)+n*t),r}},Ht=function(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}},Ut=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?r[n]=Xt(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Bt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jt=new RegExp(Bt.source,"g");var zt,qt,Gt=function(t,r){var e,n,i,s,o,a=Bt.lastIndex=jt.lastIndex=0,l=-1,h=[],u=[];for(t+="",r+="";(e=Bt.exec(t))&&(n=jt.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),h[l]?h[l]+=i:h[++l]=i),(e=e[0])===(n=n[0])?h[l]?h[l]+=n:h[++l]=n:(h[++l]=null,u.push({i:l,x:Ht(e,n)})),a=jt.lastIndex;return a<r.length&&(i=r.slice(a),h[l]?h[l]+=i:h[++l]=i),h.length<2?u[0]?(o=u[0].x,function(t){return o(t)+""}):(s=r,function(){return s}):(r=u.length,function(t){for(var e,n=0;n<r;++n)h[(e=u[n]).i]=e.x(t);return h.join("")})},Xt=function(t,e){var n=typeof e;return null==e||"boolean"==n?Nt(e):("number"==n?Ht:"string"==n?(n=pt(e))?(e=n,Ct):Gt:e instanceof pt?Ct:e instanceof Date?Rt:Ft(e)?Dt:Array.isArray(e)?Lt:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ut:Ht)(t,e)},Yt=0,Wt=0,Vt=0,$t=1e3,Zt=0,Kt=0,Qt=0,Jt="object"==typeof performance&&performance.now?performance:Date,te="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ee(){return Kt||(te(ne),Kt=Jt.now()+Qt)}function ne(){Kt=0}function re(){this._call=this._time=this._next=null}function ie(t,e,n){var r=new re;return r.restart(t,e,n),r}function se(){Kt=(Zt=Jt.now())+Qt,Yt=Wt=0;try{!function(){ee(),++Yt;for(var t,e=zt;e;)0<=(t=Kt-e._time)&&e._call.call(void 0,t),e=e._next;--Yt}()}finally{Yt=0,function(){var t,e,n=zt,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:zt=e);qt=t,ae(r)}(),Kt=0}}function oe(){var t=Jt.now(),e=t-Zt;$t<e&&(Qt-=e,Zt=t)}function ae(t){Yt||(Wt=Wt&&clearTimeout(Wt),24<t-Kt?(t<1/0&&(Wt=setTimeout(se,t-Jt.now()-Qt)),Vt=Vt&&clearInterval(Vt)):(Vt||(Zt=Jt.now(),Vt=setInterval(oe,$t)),Yt=1,te(se)))}re.prototype=ie.prototype={constructor:re,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ee():+n)+(null==e?0:+e),this._next||qt===this||(qt?qt._next=this:zt=this,qt=this),this._call=t,this._time=n,ae()},stop:function(){this._call&&(this._call=null,this._time=1/0,ae())}};function le(e,n,t){var r=new re;return n=null==n?0:+n,r.restart(t=>{r.stop(),e(t+n)},n,t),r}function he(t,e,n,r,i,s){var o,a,l,h,u,c=t.__transition;if(c){if(n in c)return}else t.__transition={};function f(t){var e,n,r,i;if(l.state!==de)return g();for(e in u)if((i=u[e]).name===l.name){if(i.state===pe)return le(f);i.state===me?(i.state=_e,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete u[e]):+e<a&&(i.state=_e,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete u[e])}if(le(function(){l.state===pe&&(l.state=me,l.timer.restart(d,l.delay,l.time),d(t))}),l.state=ge,l.on.call("start",o,o.__data__,l.index,l.group),l.state===ge){for(l.state=pe,h=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(i=l.tween[e].value.call(o,o.__data__,l.index,l.group))&&(h[++n]=i);h.length=n+1}}function d(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(g),l.state=ye,1),n=-1,r=h.length;++n<r;)h[n].call(o,e);l.state===ye&&(l.on.call("end",o,o.__data__,l.index,l.group),g())}function g(){for(var t in l.state=_e,l.timer.stop(),delete u[a],u)return;delete o.__transition}o=t,a=n,l={name:e,index:r,group:i,on:ue,tween:ce,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fe},((u=o.__transition)[a]=l).timer=ie(function(t){l.state=de,l.timer.restart(f,l.delay,l.time),l.delay<=t&&f(t-l.delay)},0,l.time)}var ue=a("start","end","cancel","interrupt"),ce=[],fe=0,de=1,ge=2,pe=3,me=4,ye=5,_e=6;function ve(t,e){e=xe(t,e);if(e.state>fe)throw new Error("too late; already scheduled");return e}function we(t,e){e=xe(t,e);if(e.state>pe)throw new Error("too late; already running");return e}function xe(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Ae(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Me,skewX:Math.atan(l)*Me,scaleX:o,scaleY:a}}var be,ke=function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>ge&&n.state<ye,n.state=_e,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}},Me=180/Math.PI,Te={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Se(c,f,d,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,s,o,a,l,h=[],u=[];return t=c(t),e=c(e),i=t.translateX,s=t.translateY,l=e.translateX,a=e.translateY,o=h,n=u,i!==l||s!==a?(r=o.push("translate(",null,f,null,d),n.push({i:r-4,x:Ht(i,l)},{i:r-2,x:Ht(s,a)})):(l||a)&&o.push("translate("+l+f+a+d),n=t.rotate,i=e.rotate,r=h,s=u,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),s.push({i:r.push(p(r)+"rotate(",null,g)-2,x:Ht(n,i)})):i&&r.push(p(r)+"rotate("+i+g),o=t.skewX,l=e.skewX,a=h,s=u,o!==l?s.push({i:a.push(p(a)+"skewX(",null,g)-2,x:Ht(o,l)}):l&&a.push(p(a)+"skewX("+l+g),n=t.scaleX,r=t.scaleY,i=e.scaleX,s=e.scaleY,o=h,a=u,n!==i||r!==s?(l=o.push(p(o)+"scale(",null,",",null,")"),a.push({i:l-4,x:Ht(n,i)},{i:l-2,x:Ht(r,s)})):1===i&&1===s||o.push(p(o)+"scale("+i+","+s+")"),t=e=null,function(t){for(var e,n=-1,r=u.length;++n<r;)h[(e=u[n]).i]=e.x(t);return h.join("")}}}var Ne=Se(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?Te:Ae(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Ee=Se(function(t){return null==t?Te:((be=be||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=be.transform.baseVal.consolidate())?(t=t.matrix,Ae(t.a,t.b,t.c,t.d,t.e,t.f)):Te)},", ",")",")");function Oe(t,e,n){var r=t._id;return t.each(function(){var t=we(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return xe(t,r).value[e]}}function Ie(t,e){var n;return("number"==typeof e?Ht:e instanceof pt?Ct:(n=pt(e))?(e=n,Ct):Gt)(t,e)}function Ce(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):s}return t._value=i,t}function Pe(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttribute(e,n.call(this,t))}):s}return t._value=i,t}var De=K.prototype.constructor;function Fe(t){return function(){this.style.removeProperty(t)}}function Le(i,s,o){var a,l;function t(){var e,n,r,t=s.apply(this,arguments);return a=t!==l?(l=t)&&(e=i,n=t,r=o,function(t){this.style.setProperty(e,n.call(this,t),r)}):a}return t._value=s,t}function Re(n){var r,i;function t(){var e,t=n.apply(this,arguments);return r=t!==i?(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):r}return t._value=n,t}var He=0;function Ue(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}e=K.prototype;Ue.prototype={constructor:Ue,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=d(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,h=r[o],u=h.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=h[f])&&(l=t.call(a,a.__data__,f,h))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,he(c[f],e,n,f,c,xe(a,n)));return new Ue(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=y(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,h=r[a],u=h.length,c=0;c<u;++c)if(l=h[c]){for(var f,d=t.call(l,l.__data__,c,h),g=xe(l,n),p=0,m=d.length;p<m;++p)(f=d[p])&&he(f,e,n,p,d,g);s.push(d),o.push(l)}return new Ue(s,o,e,n)},selectChild:e.selectChild,selectChildren:e.selectChildren,filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new Ue(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],h=n[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f]||h[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new Ue(s,this._parents,this._name,this._id)},selection:function(){return new De(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++He,r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a,l=r[s],h=l.length,u=0;u<h;++u)(o=l[u])&&(a=xe(o,e),he(o,t,n,u,l,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease}));return new Ue(r,this._parents,t,n)},call:e.call,nodes:e.nodes,node:e.node,size:e.size,empty:e.empty,each:e.each,on:function(t,e){var n,r,i,s,o,a,l=this._id;return arguments.length<2?xe(this.node(),l).on.on(t):this.each((n=l,i=e,a=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?ve:we,function(){var t=a(this,n),e=t.on;e!==s&&(o=(s=e).copy()).on(r,i),t.on=o}))},attr:function(t,e){var n=N(t),r="transform"===n?Ee:Ie;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttribute(r)}})(n,r,Oe(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===i?s:s=n(i=t,r)}}:function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttribute(e);return t===o?null:t===i?s:s=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;t=N(t);return this.tween(n,(t.local?Ce:Pe)(t,e))},style:function(t,e,n){var r,i,s,o,a,l,h,u,c,f,d,g,p,m,y,_,v,w,x,A,b,k,M,T,S,N="transform"==(t+="")?Ne:Ie;return null==e?this.styleTween(t,(b=t,k=N,function(){var t=O(this,b),e=(this.style.removeProperty(b),O(this,b));return t===e?null:t===M&&e===T?S:S=k(M=t,T=e)})).on("end.style."+t,Fe(t)):"function"==typeof e?this.styleTween(t,(_=N,v=Oe(this,"style."+(y=t),e),function(){var t=O(this,y),e=v(this),n=e+"";return null==e&&(this.style.removeProperty(y),n=e=O(this,y)),t===n?null:t===w&&n===x?A:(x=n,A=_(w=t,e))})).each((h=this._id,m="end."+(p="style."+(u=t)),function(){var t=we(this,h),e=t.on,n=null==t.value[p]?g=g||Fe(u):void 0;e===c&&d===n||(f=(c=e).copy()).on(m,d=n),t.on=f})):this.styleTween(t,(r=t,i=N,l=(s=e)+"",function(){var t=O(this,r);return t===l?null:t===o?a:a=i(o=t,s)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Le(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=Oe(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Re(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=xe(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?function(i,s){var o,a;return function(){var t=we(this,i),e=t.tween;if(e!==o)for(var n=0,r=(a=o=e).length;n<r;++n)if(a[n].name===s){(a=a.slice()).splice(n,1);break}t.tween=a}}:function(s,o,a){var l,h;if("function"!=typeof a)throw new Error;return function(){var t=we(this,s),e=t.tween;if(e!==l){h=(l=e).slice();for(var n={name:o,value:a},r=0,i=h.length;r<i;++r)if(h[r].name===o){h[r]=n;break}r===i&&h.push(n)}t.tween=h}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ve(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ve(this,t).delay=e}})(e,t)):xe(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){we(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){we(this,t).duration=e}})(e,t)):xe(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){we(this,t).ease=e}}(e,t)):xe(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;we(this,e).ease=t}));var e,n},end:function(){var i,s,o=this,a=o._id,l=o.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--l&&t()}};o.each(function(){var t=we(this,a),e=t.on;e!==i&&((s=(i=e).copy())._.cancel.push(n),s._.interrupt.push(n),s._.end.push(r)),t.on=s}),0===l&&t()})},[Symbol.iterator]:e[Symbol.iterator]};var Be={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};K.prototype.interrupt=function(t){return this.each(function(){ke(this,t)})},K.prototype.transition=function(t){var e,n;t=t instanceof Ue?(e=t._id,t._name):(e=++He,(n=Be).time=ee(),null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,h=0;h<l;++h)(o=a[h])&&he(o,t,e,h,a,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new Ue(r,this._parents,t,e)};const{}=Math;function je(t){return[+t[0],+t[1]]}function ze(t){return[je(t[0]),je(t[1])]}["w","e"].map(qe),["n","s"].map(qe),["n","w","e","s","nw","ne","sw","se"].map(qe);function qe(t){return{type:t}}function Ge(t){return function(){return t}}function Xe(t){return 1e-6*(t()-.5)}function Ye(t){return t.index}function We(t,e){t=t.get(e);if(!t)throw new Error("node not found: "+e);return t}function Ve(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s,o,a,l,h,u,c,f,d=t._root,g={data:r},p=t._x0,m=t._y0,y=t._x1,_=t._y1;if(!d)return t._root=g,t;for(;d.length;)if((h=e>=(s=(p+y)/2))?p=s:y=s,(u=n>=(o=(m+_)/2))?m=o:_=o,!(d=(i=d)[c=u<<1|h]))return i[c]=g,t;if(a=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===a&&n===l)return g.next=d,i?i[c]=g:t._root=g,t;for(;i=i?i[c]=new Array(4):t._root=new Array(4),(h=e>=(s=(p+y)/2))?p=s:y=s,(u=n>=(o=(m+_)/2))?m=o:_=o,(c=u<<1|h)==(f=(o<=l)<<1|s<=a););return i[f]=d,i[c]=g,t}function $e(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Ze(t){return t[0]}function Ke(t){return t[1]}function Qe(t,e,n){n=new Je(null==e?Ze:e,null==n?Ke:n,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function Je(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function tn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}nt=Qe.prototype=Je.prototype;nt.copy=function(){var t,e,n=new Je(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=tn(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=tn(e));return n},nt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Ve(this.cover(e,n),e,n,t)},nt.addAll=function(t){for(var e,n,r,i=t.length,s=new Array(i),o=new Array(i),a=1/0,l=1/0,h=-1/0,u=-1/0,c=0;c<i;++c)isNaN(n=+this._x.call(null,e=t[c]))||isNaN(r=+this._y.call(null,e))||((s[c]=n)<a&&(a=n),h<n&&(h=n),(o[c]=r)<l&&(l=r),u<r&&(u=r));if(h<a||u<l)return this;for(this.cover(a,l).cover(h,u),c=0;c<i;++c)Ve(this,s[c],o[c],t[c]);return this},nt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o,a,l=i-n||1,h=this._root;t<n||i<=t||e<r||s<=e;)switch(a=(e<r)<<1|t<n,(o=new Array(4))[a]=h,h=o,l*=2,a){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l}this._root&&this._root.length&&(this._root=h)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this},nt.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},nt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},nt.find=function(t,e,n){var r,i,s,o,a,l,h,u,c=this._x0,f=this._y0,d=this._x1,g=this._y1,p=[],m=this._root;for(m&&p.push(new $e(m,c,f,d,g)),null==n?n=1/0:(c=t-n,f=e-n,d=t+n,g=e+n,n*=n);h=p.pop();)!(m=h.node)||(r=h.x0)>d||(i=h.y0)>g||(s=h.x1)<c||(o=h.y1)<f||(m.length?(p.push(new $e(m[3],a=(r+s)/2,l=(i+o)/2,s,o),new $e(m[2],r,l,a,o),new $e(m[1],a,i,s,l),new $e(m[0],r,i,a,l)),(a=(l<=e)<<1|a<=t)&&(h=p[p.length-1],p[p.length-1]=p[p.length-1-a],p[p.length-1-a]=h)):(h=(h=t-+this._x.call(null,m.data))*h+(h=e-+this._y.call(null,m.data))*h)<n&&(c=t-(h=Math.sqrt(n=h)),f=e-h,d=t+h,g=e+h,u=m.data));return u},nt.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,s,o,a,l,h,u,c,f=this._root,d=this._x0,g=this._y0,p=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((l=s>=(h=(d+p)/2))?d=h:p=h,(h=o>=(a=(g+m)/2))?g=a:m=a,!(f=(e=f)[u=h<<1|l]))return this;if(!f.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(n=e,c=u)}for(;f.data!==t;)if(!(f=(r=f).next))return this;return(i=f.next)&&delete f.next,r?i?r.next=i:delete r.next:e?(i?e[u]=i:delete e[u],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[c]=f:this._root=f)):this._root=i,this},nt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},nt.root=function(){return this._root},nt.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},nt.visit=function(t){var e,n,r,i,s,o,a,l=[],h=this._root;for(h&&l.push(new $e(h,this._x0,this._y0,this._x1,this._y1));e=l.pop();)!t(h=e.node,n=e.x0,r=e.y0,i=e.x1,s=e.y1)&&h.length&&(o=(n+i)/2,a=(r+s)/2,(e=h[3])&&l.push(new $e(e,o,a,i,s)),(e=h[2])&&l.push(new $e(e,n,a,o,s)),(e=h[1])&&l.push(new $e(e,o,r,i,a)),(e=h[0])&&l.push(new $e(e,n,r,o,a)));return this},nt.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new $e(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i,s,o,a,l,h,u,c=e.node;c.length&&(s=e.x0,o=e.y0,h=(s+(a=e.x1))/2,u=(o+(l=e.y1))/2,(i=c[0])&&n.push(new $e(i,s,o,h,u)),(i=c[1])&&n.push(new $e(i,h,o,a,u)),(i=c[2])&&n.push(new $e(i,s,u,h,l)),(i=c[3])&&n.push(new $e(i,h,u,a,l))),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},nt.x=function(t){return arguments.length?(this._x=t,this):this._x},nt.y=function(t){return arguments.length?(this._y=t,this):this._y};const en=1664525,nn=1013904223,rn=4294967296;function sn(t){return t.x}function on(t){return t.y}var an=Math.PI*(3-Math.sqrt(5)),ln=Math.sqrt(50),hn=Math.sqrt(10),un=Math.sqrt(2);function cn(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(ln<=t?10:hn<=t?5:un<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(ln<=t?10:hn<=t?5:un<=t?2:1)}function fn(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function dn(n){let i=n,s=n,o=n;function a(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}while(n<r)}return n}return 1===n.length&&(i=(t,e)=>n(t)-e,s=fn,o=(t,e)=>fn(n(t),e)),{left:a,center:function(t,e,n=0,r=t.length){return r=a(t,e,n,r-1),n<r&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<=0?n=1+i:r=i}while(n<r)}return n}}}function gn(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var it=dn(fn),rt=it.right,pn=(it.left,dn(function(t){return null===t?NaN:+t}).center,rt);function mn(t){return+t}var yn=[0,1];function _n(t){return t}function vn(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function wn(t,e,n){var r=t[0],t=t[1],i=e[0],e=e[1],i=t<r?(r=vn(t,r),n(e,i)):(r=vn(r,t),n(i,e));return function(t){return i(r(t))}}function xn(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=vn(n[o],n[o+1]),s[o]=e(t[o],t[o+1]);return function(t){var e=pn(n,t,1,r)-1;return s[e](i[e](t))}}function An(){var n,r,e,i,s,o,a=yn,l=yn,h=Xt,u=_n;function c(){var e,n,t,r=Math.min(a.length,l.length);return u!==_n&&(e=a[0],(n=a[r-1])<e&&(t=e,e=n,n=t),u=function(t){return Math.max(e,Math.min(n,t))}),i=2<r?xn:wn,s=o=null,f}function f(t){return null==t||isNaN(t=+t)?e:(s=s||i(a.map(n),l,h))(n(u(t)))}return f.invert=function(t){return u(r((o=o||i(l,a.map(n),Ht))(t)))},f.domain=function(t){return arguments.length?(a=Array.from(t,mn),c()):a.slice()},f.range=function(t){return arguments.length?(l=Array.from(t),c()):l.slice()},f.rangeRound=function(t){return l=Array.from(t),h=gn,c()},f.clamp=function(t){return arguments.length?(u=!!t||_n,c()):u!==_n},f.interpolate=function(t){return arguments.length?(h=t,c()):h},f.unknown=function(t){return arguments.length?(e=t,f):e},function(t,e){return n=t,r=e,c()}}var bn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kn(t){if(!(e=bn.exec(t)))throw new Error("invalid format: "+t);var e;return new Mn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Mn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}kn.prototype=Mn.prototype,Mn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function Tn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function Sn(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(On(e)/3)))-On(Math.abs(t)))}function Nn(t,e){return(e=Tn(t,e))?(t=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")):t+""}var En,On=function(t){return(t=Tn(Math.abs(t)))?t[1]:NaN},In=function(a,l){return function(t,e){for(var n=t.length,r=[],i=0,s=a[0],o=0;0<n&&0<s&&(e<o+s+1&&(s=Math.max(1,e-o)),r.push(t.substring(n-=s,n+s)),!((o+=s+1)>e));)s=a[i=(i+1)%a.length];return r.reverse().join(l)}},Cn=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},Pn=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t},Dn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Nn(100*t,e),r:Nn,s:function(t,e){var n=Tn(t,e);if(!n)return t+"";var r=n[0],i=n[1],n=i-(En=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=r.length;return n===i?r:i<n?r+new Array(n-i+1).join("0"):0<n?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+Tn(t,Math.max(0,e+n-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},Fn=function(t){return t},Ln=Array.prototype.map,Rn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Hn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,On(e)-On(t))+1}function Un(t){return Math.max(0,-On(Math.abs(t)))}var Bn,jn=(Bn=function(t){var A=void 0===t.grouping||void 0===t.thousands?Fn:In(Ln.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",b=void 0===t.decimal?".":t.decimal+"",k=void 0===t.numerals?Fn:Cn(Ln.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"−":t.minus+"",T=void 0===t.nan?"NaN":t.nan+"";function o(t){var h=(t=kn(t)).fill,u=t.align,c=t.sign,e=t.symbol,f=t.zero,d=t.width,g=t.comma,p=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Dn[y]||(void 0===p&&(p=12),m=!0,y="g"),(f||"0"===h&&"="===u)&&(f=!0,h="0",u="=");var _="$"===e?r:"#"===e&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===e?i:/[%p]/.test(y)?s:"",w=Dn[y],x=/[defgprs%]/.test(y);function n(t){var e,n,r,i=_,s=v;if("c"===y)s=w(t)+s,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?T:w(Math.abs(t),p),m&&(t=Pn(t)),i=((o=o&&0==+t&&"+"!==c?!1:o)?"("===c?c:M:"-"===c||"("===c?"":c)+i,s=("s"===y?Rn[8+En/3]:"")+s+(o&&"("===c?")":""),x)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){s=(46===r?b+t.slice(e+1):t.slice(e))+s,t=t.slice(0,e);break}}g&&!f&&(t=A(t,1/0));var a=i.length+t.length+s.length,l=a<d?new Array(d-a+1).join(h):"";switch(g&&f&&(t=A(l+t,l.length?d-s.length:1/0),l=""),u){case"<":t=i+t+s+l;break;case"=":t=i+l+t+s;break;case"^":t=l.slice(0,a=l.length>>1)+i+t+s+l.slice(a);break;default:t=l+i+t+s}return k(t)}return p=void 0===p?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=kn(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(On(e)/3))),r=Math.pow(10,-e),i=Rn[8+e/3];return function(t){return n(r*t)+i}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,zn=Bn.formatPrefix;function qn(t,e,n,r){var i,s,o,a,l=(s=t,o=e,a=n,n=Math.abs(o-s)/Math.max(0,a),a=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),ln<=(n=n/a)?a*=10:hn<=n?a*=5:un<=n&&(a*=2),o<s?-a:a);switch((r=kn(null==r?",f":r)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Sn(l,h))||(r.precision=i),zn(r,h);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Hn(l,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Un(l))||(r.precision=i-2*("%"===r.type))}return jn(r)}function Gn(h){var u=h.domain;return h.ticks=function(t){var e=u();return function(n,r,t){var e,i,s,o,a=-1;if(t=+t,(n=+n)===(r=+r)&&0<t)return[n];if((e=r<n)&&(i=n,n=r,r=i),0===(o=cn(n,r,t))||!isFinite(o))return[];if(0<o){let t=Math.round(n/o),e=Math.round(r/o);for(t*o<n&&++t,e*o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)*o}else{o=-o;let t=Math.round(n*o),e=Math.round(r*o);for(t/o<n&&++t,e/o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)/o}return e&&s.reverse(),s}(e[0],e[e.length-1],null==t?10:t)},h.tickFormat=function(t,e){var n=u();return qn(n[0],n[n.length-1],null==t?10:t,e)},h.nice=function(t){null==t&&(t=10);var e,n,r=u(),i=0,s=r.length-1,o=r[i],a=r[s],l=10;for(a<o&&(n=o,o=a,a=n,n=i,i=s,s=n);0<l--;){if((n=cn(o,a,t))===e)return r[i]=o,r[s]=a,u(r);if(0<n)o=Math.floor(o/n)*n,a=Math.ceil(a/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,a=Math.floor(a*n)/n}e=n}return h},h}const Xn=Math.PI,Yn=2*Xn,Wn=1e-6,Vn=Yn-Wn;function $n(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zn(){return new $n}$n.prototype=Zn.prototype={constructor:$n,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){var s,o,a=this._x1,l=this._y1,h=(n=+n)-(t=+t),u=(r=+r)-(e=+e),c=a-t,f=l-e,d=c*c+f*f;if((i=+i)<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):d>Wn&&(Math.abs(f*h-u*c)>Wn&&i?(o=h*h+u*u,a=(s=n-a)*s+(n=r-l)*n,r=Math.sqrt(o),l=Math.sqrt(d),l=(a=i*Math.tan((Xn-Math.acos((o+d-a)/(2*r*l)))/2))/l,r=a/r,Math.abs(l-1)>Wn&&(this._+="L"+(t+l*c)+","+(e+l*f)),this._+="A"+i+","+i+",0,0,"+ +(c*n<f*s)+","+(this._x1=t+r*h)+","+(this._y1=e+r*u)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,n,r,i,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(r),a=n*Math.sin(r),l=t+o,h=e+a,u=1^s,r=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+h:(Math.abs(this._x1-l)>Wn||Math.abs(this._y1-h)>Wn)&&(this._+="L"+l+","+h),n&&((r=r<0?r%Yn+Yn:r)>Vn?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=h):r>Wn&&(this._+="A"+n+","+n+",0,"+ +(r>=Xn)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Kn=Zn,Qn=(Array.prototype.slice,function(t){return function(){return t}});function Jn(t){this._context=t}Jn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};function tr(t){return new Jn(t)}function er(t){return t[0]}function nr(t){return t[1]}Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt;var rr=Math.PI,ir=2*rr;var sr={draw:function(t,e){e=Math.sqrt(e/rr);t.moveTo(e,0),t.arc(0,0,e,0,ir)}},or={draw:function(t,e){e=Math.sqrt(e/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},ar=Math.sqrt(1/3),lr=2*ar,hr={draw:function(t,e){var n=Math.sqrt(e/lr),e=n*ar;t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath()}},J=Math.sin(rr/10)/Math.sin(7*rr/10),ur=Math.sin(ir/10)*J,cr=-Math.cos(ir/10)*J,fr={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=ur*n,i=cr*n;t.moveTo(0,-n),t.lineTo(r,i);for(var s=1;s<5;++s){var o=ir*s/5,a=Math.cos(o),o=Math.sin(o);t.lineTo(o*n,-a*n),t.lineTo(a*r-o*i,o*r+a*i)}t.closePath()}},dr={draw:function(t,e){var n=Math.sqrt(e),e=-n/2;t.rect(e,e,n,n)}},gr=Math.sqrt(3),pr={draw:function(t,e){e=-Math.sqrt(e/(3*gr));t.moveTo(0,2*e),t.lineTo(-gr*e,-e),t.lineTo(gr*e,-e),t.closePath()}},mr=-.5,yr=Math.sqrt(3)/2,_r=1/Math.sqrt(12),vr=3*(_r/2+1),wr={draw:function(t,e){var n=Math.sqrt(e/vr),r=n/2,i=n*_r,s=r,o=n*_r+n,e=-s,n=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(e,n),t.lineTo(mr*r-yr*i,yr*r+mr*i),t.lineTo(mr*s-yr*o,yr*s+mr*o),t.lineTo(mr*e-yr*n,yr*e+mr*n),t.lineTo(mr*r+yr*i,mr*i-yr*r),t.lineTo(mr*s+yr*o,mr*o-yr*s),t.lineTo(mr*e+yr*n,mr*n-yr*e),t.closePath()}},xr=function(e,n){var r=null;function i(){var t;if(r=r||(t=Kn()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}return e="function"==typeof e?e:Qn(e||sr),n="function"==typeof n?n:Qn(void 0===n?64:+n),i.type=function(t){return arguments.length?(e="function"==typeof t?t:Qn(t),i):e},i.size=function(t){return arguments.length?(n="function"==typeof t?t:Qn(+t),i):n},i.context=function(t){return arguments.length?(r=null==t?null:t,i):r},i};function Ar(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function br(t){this._context=t}br.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ar(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ar(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function kr(t,e){this._basis=new br(t),this._beta=e}kr.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var r,i=t[0],s=e[0],o=t[n]-i,a=e[n]-s,l=-1;++l<=n;)this._basis.point(this._beta*t[l]+(1-this._beta)*(i+(r=l/n)*o),this._beta*e[l]+(1-this._beta)*(s+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};e=function e(n){function t(t){return 1===n?new br(t):new kr(t,n)}return t.beta=function(t){return e(+t)},t}(.85);function Mr(t){return((t=Math.exp(t))+1/t)/2}(function n(f,d,g){function t(t,e){var r,i,s,n,o=t[0],a=t[1],l=t[2],h=e[0],t=e[1],e=e[2],u=h-o,c=t-a,h=u*u+c*c;return(n=h<1e-12?(s=Math.log(e/l)/f,function(t){return[o+t*u,a+t*c,l*Math.exp(f*t*s)]}):(r=Math.sqrt(h),t=(e*e-l*l+g*h)/(2*l*d*r),n=(e*e-l*l-g*h)/(2*e*d*r),i=Math.log(Math.sqrt(t*t+1)-t),s=(Math.log(Math.sqrt(n*n+1)-n)-i)/f,function(t){var e=t*s,n=Mr(i),t=l/(d*r)*(n*(t=f*e+i,((t=Math.exp(2*t))-1)/(t+1))-(t=i,((t=Math.exp(i))-1/t)/2));return[o+t*u,a+t*c,l*n/Mr(f*e+i)]})).duration=1e3*s*f/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t})(Math.SQRT2,2,4);function Tr(t,e,n){this.k=t,this.x=e,this.y=n}Tr.prototype={constructor:Tr,scale:function(t){return 1===t?this:new Tr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Tr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Sr=function(t){return t},Nr=1,Er=2,Or=3,Ir=4,Cr=1e-6;function Pr(t){return"translate("+t+",0)"}function Dr(t){return"translate(0,"+t+")"}function Fr(e){return t=>+e(t)}function Lr(e,n){return n=Math.max(0,e.bandwidth()-2*n)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function Rr(){return!this.__axis}function Hr(d,g){var p=[],m=null,y=null,_=6,v=6,w=3,x="undefined"!=typeof window&&1<window.devicePixelRatio?0:.5,A=d===Nr||d===Ir?-1:1,b=d===Ir||d===Er?"x":"y",k=d===Nr||d===Or?Pr:Dr;function e(t){var e=null==m?g.ticks?g.ticks.apply(g,p):g.domain():m,n=null==y?g.tickFormat?g.tickFormat.apply(g,p):Sr:y,r=Math.max(_,0)+w,i=g.range(),s=+i[0]+x,o=+i[i.length-1]+x,a=(g.bandwidth?Lr:Fr)(g.copy(),x),l=t.selection?t.selection():t,h=l.selectAll(".domain").data([null]),u=(f=l.selectAll(".tick").data(e,g).order()).exit(),c=f.enter().append("g").attr("class","tick"),i=f.select("line"),e=f.select("text"),h=h.merge(h.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),f=f.merge(c),i=i.merge(c.append("line").attr("stroke","currentColor").attr(b+"2",A*_)),e=e.merge(c.append("text").attr("fill","currentColor").attr(b,A*r).attr("dy",d===Nr?"0em":d===Or?"0.71em":"0.32em"));t!==l&&(h=h.transition(t),f=f.transition(t),i=i.transition(t),e=e.transition(t),u=u.transition(t).attr("opacity",Cr).attr("transform",function(t){return isFinite(t=a(t))?k(t+x):this.getAttribute("transform")}),c.attr("opacity",Cr).attr("transform",function(t){var e=this.parentNode.__axis;return k((e&&isFinite(e=e(t))?e:a(t))+x)})),u.remove(),h.attr("d",d===Ir||d===Er?v?"M"+A*v+","+s+"H"+x+"V"+o+"H"+A*v:"M"+x+","+s+"V"+o:v?"M"+s+","+A*v+"V"+x+"H"+o+"V"+A*v:"M"+s+","+x+"H"+o),f.attr("opacity",1).attr("transform",function(t){return k(a(t)+x)}),i.attr(b+"2",A*_),e.attr(b,A*r).text(n),l.filter(Rr).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",d===Er?"start":d===Ir?"end":"middle"),l.each(function(){this.__axis=a})}return e.scale=function(t){return arguments.length?(g=t,e):g},e.ticks=function(){return p=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(p=null==t?[]:Array.from(t),e):p.slice()},e.tickValues=function(t){return arguments.length?(m=null==t?null:Array.from(t),e):m&&m.slice()},e.tickFormat=function(t){return arguments.length?(y=t,e):y},e.tickSize=function(t){return arguments.length?(_=v=+t,e):_},e.tickSizeInner=function(t){return arguments.length?(_=+t,e):_},e.tickSizeOuter=function(t){return arguments.length?(v=+t,e):v},e.tickPadding=function(t){return arguments.length?(w=+t,e):w},e.offset=function(t){return arguments.length?(x=+t,e):x},e}var Ur={value:()=>{}};function Br(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new jr(r)}function jr(t){this._=t}function zr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ur,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}jr.prototype=Br.prototype={constructor:jr,on:function(t,e){var n,r,i=this._,s=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=s[o]).type)i[n]=zr(i[n],t.name,e);else if(null==e)for(n in i)i[n]=zr(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=s[o]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(i[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new jr(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var qr=Br;function Gr(){}function Xr(t){return null==t?Gr:function(){return this.querySelector(t)}}function Yr(){return[]}function Wr(t){return null==t?Yr:function(){return this.querySelectorAll(t)}}function Vr(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function $r(t){return function(){return this.matches(t)}}function Zr(e){return function(t){return t.matches(e)}}var Kr=Array.prototype.find;function Qr(){return this.firstElementChild}var Jr=Array.prototype.filter;function ti(){return Array.from(this.children)}function ei(t){return new Array(t.length)}function ni(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ni.prototype={constructor:ni,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ri(t,e,n,r,i,s){for(var o,a=0,l=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new ni(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function ii(t,e,n,r,i,s,o){for(var a,l,h=new Map,u=e.length,c=s.length,f=new Array(u),d=0;d<u;++d)(a=e[d])&&(f[d]=l=o.call(a,a.__data__,d,e)+"",h.has(l)?i[d]=a:h.set(l,a));for(d=0;d<c;++d)l=o.call(t,s[d],d,s)+"",(a=h.get(l))?((r[d]=a).__data__=s[d],h.delete(l)):n[d]=new ni(t,s[d]);for(d=0;d<u;++d)(a=e[d])&&h.get(f[d])===a&&(i[d]=a)}function si(t){return t.__data__}function oi(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var ai="http://www.w3.org/1999/xhtml",li={svg:"http://www.w3.org/2000/svg",xhtml:ai,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},hi=function(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),li.hasOwnProperty(e)?{space:li[e],local:t}:t};var ui=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function ci(t,e){return t.style.getPropertyValue(e)||ui(t).getComputedStyle(t,null).getPropertyValue(e)}function fi(t){return t.trim().split(/^|\s+/)}function di(t){return t.classList||new gi(t)}function gi(t){this._node=t,this._names=fi(t.getAttribute("class")||"")}function pi(t,e){for(var n=di(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function mi(t,e){for(var n=di(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}gi.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function yi(){this.textContent=""}function _i(){this.innerHTML=""}function vi(){this.nextSibling&&this.parentNode.appendChild(this)}function wi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xi(t){return((t=hi(t)).local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===ai&&t.documentElement.namespaceURI===ai?t.createElement(n):t.createElementNS(e,n)}})(t)}function Ai(){return null}function bi(){var t=this.parentNode;t&&t.removeChild(this)}function ki(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Mi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ti(s){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],s.type&&e.type!==s.type||e.name!==s.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?t.length=r:delete this.__on}}}function Si(o,a,l){return function(){var t,e,n=this.__on,r=(e=a,function(t){e.call(this,t,this.__data__)});if(n)for(var i=0,s=n.length;i<s;++i)if((t=n[i]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=r,t.options=l),void(t.value=a);this.addEventListener(o.type,r,l),t={type:o.type,name:o.name,value:a,listener:r,options:l},n?n.push(t):this.__on=[t]}}function Ni(t,e,n){var r=ui(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var Ei=[null];function Oi(t,e){this._groups=t,this._parents=e}function Ii(){return new Oi([[document.documentElement]],Ei)}Oi.prototype=Ii.prototype={constructor:Oi,select:function(t){"function"!=typeof t&&(t=Xr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],l=a.length,h=r[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(o=t.call(s,s.__data__,u,a))&&("__data__"in s&&(o.__data__=s.__data__),h[u]=o);return new Oi(r,this._parents)},selectAll:function(t){t=("function"==typeof t?Vr:Wr)(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],l=a.length,h=0;h<l;++h)(o=a[h])&&(r.push(t.call(o,o.__data__,h,a)),i.push(o));return new Oi(r,i)},selectChild:function(t){return this.select(null==t?Qr:(e="function"==typeof t?t:Zr(t),function(){return Kr.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?ti:(e="function"==typeof t?t:Zr(t),function(){return Jr.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=$r(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new Oi(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,si);var n,r=e?ii:ri,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),h=new Array(o),u=0;u<o;++u){var c=i[u],f=s[u],d=f.length,g="object"==typeof(g=t.call(c,c&&c.__data__,u,i))&&"length"in g?g:Array.from(g),p=g.length,m=l[u]=new Array(p),y=a[u]=new Array(p);r(c,f,m,y,h[u]=new Array(d),g,e);for(var _,v,w=0,x=0;w<p;++w)if(_=m[w]){for(x<=w&&(x=w+1);!(v=y[x])&&++x<p;);_._next=v||null}}return(a=new Oi(a,i))._enter=l,a._exit=h,a},enter:function(){return new Oi(this._enter||this._groups.map(ei),this._parents)},exit:function(){return new Oi(this._exit||this._groups.map(ei),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit(),r="function"==typeof t?(r=t(r))&&r.selection():r.append(t+"");return null!=e&&(i=(i=e(i))&&i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],h=n[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f]||h[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new Oi(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];0<=--s;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||oi;for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s){for(var o,a=e[s],l=a.length,h=i[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(h[u]=o);h.sort(t)}return new Oi(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=hi(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):ci(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=fi(t+"");if(arguments.length<2){for(var r=di(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?pi:mi)(this,t)}}:e?function(t){return function(){pi(this,t)}}:function(t){return function(){mi(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?yi:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?_i:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(vi)},lower:function(){return this.each(wi)},append:function(t){var e="function"==typeof t?t:xi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:xi(t),r=null==e?Ai:"function"==typeof e?e:Xr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(bi)},clone:function(t){return this.select(t?Mi:ki)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=s.length;if(!(arguments.length<2)){for(a=e?Si:Ti,r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var l,h=0,u=a.length;h<u;++h)for(r=0,l=a[h];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Ni(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Ni(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};var Ci=Ii,Pi=function(t){return"string"==typeof t?new Oi([[document.querySelector(t)]],[document.documentElement]):new Oi([[t]],Ei)};const Di={passive:!1},Fi={capture:!0,passive:!1};function Li(t){t.stopImmediatePropagation()}var Ri=function(t){t.preventDefault(),t.stopImmediatePropagation()},Hi=function(t){var e=t.document.documentElement,t=Pi(t).on("dragstart.drag",Ri,Fi);"onselectstart"in e?t.on("selectstart.drag",Ri,Fi):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function Ui(t,e){var n=t.document.documentElement,r=Pi(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ri,Fi),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}nt=function(t,e,n){(t.prototype=e.prototype=n).constructor=t};function Bi(t,e){var n,r=Object.create(t.prototype);for(n in e)r[n]=e[n];return r}function ji(){}var it="\\s*([+-]?\\d+)\\s*",rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",J="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zi=/^#([0-9a-f]{3,8})$/,qi=new RegExp("^rgb\\("+[it,it,it]+"\\)$"),Gi=new RegExp("^rgb\\("+[J,J,J]+"\\)$"),Xi=new RegExp("^rgba\\("+[it,it,it,rt]+"\\)$"),Yi=new RegExp("^rgba\\("+[J,J,J,rt]+"\\)$"),Wi=new RegExp("^hsl\\("+[rt,J,J]+"\\)$"),Vi=new RegExp("^hsla\\("+[rt,J,J,rt]+"\\)$"),$i={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Zi(){return this.rgb().formatHex()}function Ki(){return this.rgb().formatRgb()}function Qi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=zi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ji(e):3===n?new ns(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ts(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ts(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=qi.exec(t))?new ns(e[1],e[2],e[3],1):(e=Gi.exec(t))?new ns(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Xi.exec(t))?ts(e[1],e[2],e[3],e[4]):(e=Yi.exec(t))?ts(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Wi.exec(t))?os(e[1],e[2]/100,e[3]/100,1):(e=Vi.exec(t))?os(e[1],e[2]/100,e[3]/100,e[4]):$i.hasOwnProperty(t)?Ji($i[t]):"transparent"===t?new ns(NaN,NaN,NaN,0):null}function Ji(t){return new ns(t>>16&255,t>>8&255,255&t,1)}function ts(t,e,n,r){return new ns(t=r<=0?e=n=NaN:t,e,n,r)}function es(t,e,n,r){return 1===arguments.length?(i=(i=t)instanceof ji?i:Qi(i))?new ns((i=i.rgb()).r,i.g,i.b,i.opacity):new ns:new ns(t,e,n,null==r?1:r);var i}function ns(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function rs(){return"#"+ss(this.r)+ss(this.g)+ss(this.b)}function is(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ss(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function os(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new ls(t,e,n,r)}function as(t){if(t instanceof ls)return new ls(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof ji)?Qi(t):t))return new ls;if(t instanceof ls)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=0<l&&l<1?0:o,new ls(o,a,l,t.opacity)}function ls(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function hs(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function us(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}nt(ji,Qi,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Zi,formatHex:Zi,formatHsl:function(){return as(this).formatHsl()},formatRgb:Ki,toString:Ki}),nt(ns,es,Bi(ji,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rs,formatHex:rs,formatRgb:is,toString:is})),nt(ls,function(t,e,n,r){return 1===arguments.length?as(t):new ls(t,e,n,null==r?1:r)},Bi(ji,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ls(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ls(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new ns(hs(240<=t?t-240:120+t,n,e),hs(t,n,e),hs(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var cs=t=>()=>t;function fs(e,n){return function(t){return e+t*n}}function ds(s){return 1==(s=+s)?gs:function(t,e){return e-t?(n=t,r=e,i=s,n=Math.pow(n,i),r=Math.pow(r,i)-n,i=1/i,function(t){return Math.pow(n+t*r,i)}):cs(isNaN(t)?e:t);var n,r,i}}function gs(t,e){var n=e-t;return n?fs(t,n):cs(isNaN(t)?e:t)}var ps=function t(e){var o=ds(e);function n(e,t){var n=o((e=es(e)).r,(t=es(t)).r),r=o(e.g,t.g),i=o(e.b,t.b),s=gs(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=s(t),e+""}}return n.gamma=t,n}(1);function ms(a){return function(t){for(var e,n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o=0;o<n;++o)e=es(t[o]),r[o]=e.r||0,i[o]=e.g||0,s[o]=e.b||0;return r=a(r),i=a(i),s=a(s),e.opacity=1,function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e+""}}}ms(function(o){var a=o.length-1;return function(t){var e=t<=0?t=0:1<=t?a-(t=1):Math.floor(t*a),n=o[e],r=o[e+1],i=0<e?o[e-1]:2*n-r,s=e<a-1?o[e+2]:2*r-n;return us((t-e/a)*a,i,n,r,s)}}),ms(function(o){var a=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*a),n=o[(e+a-1)%a],r=o[e%a],i=o[(e+1)%a],s=o[(e+2)%a];return us((t-e/a)*a,n,r,i,s)}});var ys=function(e,n){n=n||[];var r,i=e?Math.min(n.length,e.length):0,s=n.slice();return function(t){for(r=0;r<i;++r)s[r]=e[r]*(1-t)+n[r]*t;return s}};function _s(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vs(t,e){for(var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o=0;o<r;++o)i[o]=Ns(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(t){for(o=0;o<r;++o)s[o]=i[o](t);return s}}var ws=function(e,n){var r=new Date;return e=+e,n=+n,function(t){return r.setTime(e*(1-t)+n*t),r}},xs=function(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}},As=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?r[n]=Ns(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},bs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ks=new RegExp(bs.source,"g");var Ms,Ts,Ss=function(t,r){var e,n,i,s,o,a=bs.lastIndex=ks.lastIndex=0,l=-1,h=[],u=[];for(t+="",r+="";(e=bs.exec(t))&&(n=ks.exec(r));)(i=n.index)>a&&(i=r.slice(a,i),h[l]?h[l]+=i:h[++l]=i),(e=e[0])===(n=n[0])?h[l]?h[l]+=n:h[++l]=n:(h[++l]=null,u.push({i:l,x:xs(e,n)})),a=ks.lastIndex;return a<r.length&&(i=r.slice(a),h[l]?h[l]+=i:h[++l]=i),h.length<2?u[0]?(o=u[0].x,function(t){return o(t)+""}):(s=r,function(){return s}):(r=u.length,function(t){for(var e,n=0;n<r;++n)h[(e=u[n]).i]=e.x(t);return h.join("")})},Ns=function(t,e){var n=typeof e;return null==e||"boolean"==n?cs(e):("number"==n?xs:"string"==n?(n=Qi(e))?(e=n,ps):Ss:e instanceof Qi?ps:e instanceof Date?ws:_s(e)?ys:Array.isArray(e)?vs:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?As:xs)(t,e)},Es=function(t){for(var e;e=t.sourceEvent;)t=e;return t},Os=function(t,e){if(t=Es(t),e=void 0===e?t.currentTarget:e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]},Is=0,Cs=0,Ps=0,Ds=1e3,Fs=0,Ls=0,Rs=0,Hs="object"==typeof performance&&performance.now?performance:Date,Us="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Bs(){return Ls||(Us(js),Ls=Hs.now()+Rs)}function js(){Ls=0}function zs(){this._call=this._time=this._next=null}function qs(t,e,n){var r=new zs;return r.restart(t,e,n),r}function Gs(){Ls=(Fs=Hs.now())+Rs,Is=Cs=0;try{!function(){Bs(),++Is;for(var t,e=Ms;e;)0<=(t=Ls-e._time)&&e._call.call(void 0,t),e=e._next;--Is}()}finally{Is=0,function(){var t,e,n=Ms,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:Ms=e);Ts=t,Ys(r)}(),Ls=0}}function Xs(){var t=Hs.now(),e=t-Fs;Ds<e&&(Rs-=e,Fs=t)}function Ys(t){Is||(Cs=Cs&&clearTimeout(Cs),24<t-Ls?(t<1/0&&(Cs=setTimeout(Gs,t-Hs.now()-Rs)),Ps=Ps&&clearInterval(Ps)):(Ps||(Fs=Hs.now(),Ps=setInterval(Xs,Ds)),Is=1,Us(Gs)))}zs.prototype=qs.prototype={constructor:zs,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Bs():+n)+(null==e?0:+e),this._next||Ts===this||(Ts?Ts._next=this:Ms=this,Ts=this),this._call=t,this._time=n,Ys()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ys())}};function Ws(e,n,t){var r=new zs;return n=null==n?0:+n,r.restart(t=>{r.stop(),e(t+n)},n,t),r}function Vs(t,e,n,r,i,s){var o,a,l,h,u,c=t.__transition;if(c){if(n in c)return}else t.__transition={};function f(t){var e,n,r,i;if(l.state!==Qs)return g();for(e in u)if((i=u[e]).name===l.name){if(i.state===to)return Ws(f);i.state===eo?(i.state=ro,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete u[e]):+e<a&&(i.state=ro,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete u[e])}if(Ws(function(){l.state===to&&(l.state=eo,l.timer.restart(d,l.delay,l.time),d(t))}),l.state=Js,l.on.call("start",o,o.__data__,l.index,l.group),l.state===Js){for(l.state=to,h=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(i=l.tween[e].value.call(o,o.__data__,l.index,l.group))&&(h[++n]=i);h.length=n+1}}function d(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(g),l.state=no,1),n=-1,r=h.length;++n<r;)h[n].call(o,e);l.state===no&&(l.on.call("end",o,o.__data__,l.index,l.group),g())}function g(){for(var t in l.state=ro,l.timer.stop(),delete u[a],u)return;delete o.__transition}o=t,a=n,l={name:e,index:r,group:i,on:$s,tween:Zs,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ks},((u=o.__transition)[a]=l).timer=qs(function(t){l.state=Qs,l.timer.restart(f,l.delay,l.time),l.delay<=t&&f(t-l.delay)},0,l.time)}var $s=qr("start","end","cancel","interrupt"),Zs=[],Ks=0,Qs=1,Js=2,to=3,eo=4,no=5,ro=6;function io(t,e){e=oo(t,e);if(e.state>Ks)throw new Error("too late; already scheduled");return e}function so(t,e){e=oo(t,e);if(e.state>to)throw new Error("too late; already running");return e}function oo(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function ao(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*uo,skewX:Math.atan(l)*uo,scaleX:o,scaleY:a}}var lo,ho=function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>Js&&n.state<no,n.state=ro,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}},uo=180/Math.PI,co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fo(c,f,d,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,i,s,o,a,l,h=[],u=[];return t=c(t),e=c(e),i=t.translateX,s=t.translateY,l=e.translateX,a=e.translateY,o=h,n=u,i!==l||s!==a?(r=o.push("translate(",null,f,null,d),n.push({i:r-4,x:xs(i,l)},{i:r-2,x:xs(s,a)})):(l||a)&&o.push("translate("+l+f+a+d),n=t.rotate,i=e.rotate,r=h,s=u,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),s.push({i:r.push(p(r)+"rotate(",null,g)-2,x:xs(n,i)})):i&&r.push(p(r)+"rotate("+i+g),o=t.skewX,l=e.skewX,a=h,s=u,o!==l?s.push({i:a.push(p(a)+"skewX(",null,g)-2,x:xs(o,l)}):l&&a.push(p(a)+"skewX("+l+g),n=t.scaleX,r=t.scaleY,i=e.scaleX,s=e.scaleY,o=h,a=u,n!==i||r!==s?(l=o.push(p(o)+"scale(",null,",",null,")"),a.push({i:l-4,x:xs(n,i)},{i:l-2,x:xs(r,s)})):1===i&&1===s||o.push(p(o)+"scale("+i+","+s+")"),t=e=null,function(t){for(var e,n=-1,r=u.length;++n<r;)h[(e=u[n]).i]=e.x(t);return h.join("")}}}var go=fo(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?co:ao(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),po=fo(function(t){return null==t?co:((lo=lo||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=lo.transform.baseVal.consolidate())?(t=t.matrix,ao(t.a,t.b,t.c,t.d,t.e,t.f)):co)},", ",")",")");function mo(t,e,n){var r=t._id;return t.each(function(){var t=so(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return oo(t,r).value[e]}}function yo(t,e){var n;return("number"==typeof e?xs:e instanceof Qi?ps:(n=Qi(e))?(e=n,ps):Ss)(t,e)}function _o(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):s}return t._value=i,t}function vo(r,i){var s,o;function t(){var e,n,t=i.apply(this,arguments);return s=t!==o?(o=t)&&(e=r,n=t,function(t){this.setAttribute(e,n.call(this,t))}):s}return t._value=i,t}var wo=Ci.prototype.constructor;function xo(t){return function(){this.style.removeProperty(t)}}function Ao(i,s,o){var a,l;function t(){var e,n,r,t=s.apply(this,arguments);return a=t!==l?(l=t)&&(e=i,n=t,r=o,function(t){this.style.setProperty(e,n.call(this,t),r)}):a}return t._value=s,t}function bo(n){var r,i;function t(){var e,t=n.apply(this,arguments);return r=t!==i?(i=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):r}return t._value=n,t}var ko=0;function Mo(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}it=Ci.prototype;Mo.prototype={constructor:Mo,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Xr(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,h=r[o],u=h.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=h[f])&&(l=t.call(a,a.__data__,f,h))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,Vs(c[f],e,n,f,c,oo(a,n)));return new Mo(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Wr(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,h=r[a],u=h.length,c=0;c<u;++c)if(l=h[c]){for(var f,d=t.call(l,l.__data__,c,h),g=oo(l,n),p=0,m=d.length;p<m;++p)(f=d[p])&&Vs(f,e,n,p,d,g);s.push(d),o.push(l)}return new Mo(s,o,e,n)},selectChild:it.selectChild,selectChildren:it.selectChildren,filter:function(t){"function"!=typeof t&&(t=$r(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,l=r[i]=[],h=0;h<a;++h)(s=o[h])&&t.call(s,s.__data__,h,o)&&l.push(s);return new Mo(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,t=n.length,i=Math.min(r,t),s=new Array(r),o=0;o<i;++o)for(var a,l=e[o],h=n[o],u=l.length,c=s[o]=new Array(u),f=0;f<u;++f)(a=l[f]||h[f])&&(c[f]=a);for(;o<r;++o)s[o]=e[o];return new Mo(s,this._parents,this._name,this._id)},selection:function(){return new wo(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++ko,r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a,l=r[s],h=l.length,u=0;u<h;++u)(o=l[u])&&(a=oo(o,e),Vs(o,t,n,u,l,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease}));return new Mo(r,this._parents,t,n)},call:it.call,nodes:it.nodes,node:it.node,size:it.size,empty:it.empty,each:it.each,on:function(t,e){var n,r,i,s,o,a,l=this._id;return arguments.length<2?oo(this.node(),l).on.on(t):this.each((n=l,i=e,a=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?io:so,function(){var t=a(this,n),e=t.on;e!==s&&(o=(s=e).copy()).on(r,i),t.on=o}))},attr:function(t,e){var n=hi(t),r="transform"===n?po:yo;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,s){var o,a,l;return function(){var t,e,n=s(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===o&&e===a?l:(a=e,l=i(o=t,n));this.removeAttribute(r)}})(n,r,mo(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===i?s:s=n(i=t,r)}}:function(e,n,r){var i,s,o=r+"";return function(){var t=this.getAttribute(e);return t===o?null:t===i?s:s=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;t=hi(t);return this.tween(n,(t.local?_o:vo)(t,e))},style:function(t,e,n){var r,i,s,o,a,l,h,u,c,f,d,g,p,m,y,_,v,w,x,A,b,k,M,T,S,N="transform"==(t+="")?go:yo;return null==e?this.styleTween(t,(b=t,k=N,function(){var t=ci(this,b),e=(this.style.removeProperty(b),ci(this,b));return t===e?null:t===M&&e===T?S:S=k(M=t,T=e)})).on("end.style."+t,xo(t)):"function"==typeof e?this.styleTween(t,(_=N,v=mo(this,"style."+(y=t),e),function(){var t=ci(this,y),e=v(this),n=e+"";return null==e&&(this.style.removeProperty(y),n=e=ci(this,y)),t===n?null:t===w&&n===x?A:(x=n,A=_(w=t,e))})).each((h=this._id,m="end."+(p="style."+(u=t)),function(){var t=so(this,h),e=t.on,n=null==t.value[p]?g=g||xo(u):void 0;e===c&&d===n||(f=(c=e).copy()).on(m,d=n),t.on=f})):this.styleTween(t,(r=t,i=N,l=(s=e)+"",function(){var t=ci(this,r);return t===l?null:t===o?a:a=i(o=t,s)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Ao(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=mo(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,bo(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=oo(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?function(i,s){var o,a;return function(){var t=so(this,i),e=t.tween;if(e!==o)for(var n=0,r=(a=o=e).length;n<r;++n)if(a[n].name===s){(a=a.slice()).splice(n,1);break}t.tween=a}}:function(s,o,a){var l,h;if("function"!=typeof a)throw new Error;return function(){var t=so(this,s),e=t.tween;if(e!==l){h=(l=e).slice();for(var n={name:o,value:a},r=0,i=h.length;r<i;++r)if(h[r].name===o){h[r]=n;break}r===i&&h.push(n)}t.tween=h}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){io(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){io(this,t).delay=e}})(e,t)):oo(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){so(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){so(this,t).duration=e}})(e,t)):oo(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){so(this,t).ease=e}}(e,t)):oo(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;so(this,e).ease=t}));var e,n},end:function(){var i,s,o=this,a=o._id,l=o.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--l&&t()}};o.each(function(){var t=so(this,a),e=t.on;e!==i&&((s=(i=e).copy())._.cancel.push(n),s._.interrupt.push(n),s._.end.push(r)),t.on=s}),0===l&&t()})},[Symbol.iterator]:it[Symbol.iterator]};var To={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};Ci.prototype.interrupt=function(t){return this.each(function(){ho(this,t)})},Ci.prototype.transition=function(t){var e,n;t=t instanceof Mo?(e=t._id,t._name):(e=++ko,(n=To).time=Bs(),null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,h=0;h<l;++h)(o=a[h])&&Vs(o,t,e,h,a,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new Mo(r,this._parents,t,e)};const{}=Math;function So(t){return[+t[0],+t[1]]}function No(t){return[So(t[0]),So(t[1])]}["w","e"].map(Eo),["n","s"].map(Eo),["n","w","e","s","nw","ne","sw","se"].map(Eo);function Eo(t){return{type:t}}var Oo=t=>()=>t;function Io(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:h,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:u}})}function Co(t){return!t.ctrlKey&&!t.button}function Po(){return this.parentNode}function Do(t,e){return null==e?{x:t.x,y:t.y}:e}function Fo(){return navigator.maxTouchPoints||"ontouchstart"in this}Io.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Lo(){var r,i,s,o,a=Co,l=Po,n=Do,e=Fo,p={},m=qr("start","drag","end"),y=0,h=0;function _(t){t.on("mousedown.drag",u).filter(e).on("touchstart.drag",d).on("touchmove.drag",g,Di).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(t,e){o||!a.call(this,t,e)||(e=w(this,l.call(this,t,e),t,e,"mouse"))&&(Pi(t.view).on("mousemove.drag",c,Fi).on("mouseup.drag",f,Fi),Hi(t.view),Li(t),s=!1,r=t.clientX,i=t.clientY,e("start",t))}function c(t){var e,n;Ri(t),s||(e=t.clientX-r,n=t.clientY-i,s=h<e*e+n*n),p.mouse("drag",t)}function f(t){Pi(t.view).on("mousemove.drag mouseup.drag",null),Ui(t.view,s),Ri(t),p.mouse("end",t)}function d(t,e){if(a.call(this,t,e))for(var n,r=t.changedTouches,i=l.call(this,t,e),s=r.length,o=0;o<s;++o)(n=w(this,i,t,e,r[o].identifier,r[o]))&&(Li(t),n("start",t,r[o]))}function g(t){for(var e,n=t.changedTouches,r=n.length,i=0;i<r;++i)(e=p[n[i].identifier])&&(Ri(t),e("drag",t,n[i]))}function v(t){var e,n,r=t.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<i;++e)(n=p[r[e].identifier])&&(Li(t),n("end",t,r[e]))}function w(o,a,t,l,h,e){var u,c,f,d=m.copy(),g=Os(e||t,a);if(null!=(f=n.call(o,new Io("beforestart",{sourceEvent:t,target:_,identifier:h,active:y,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),l)))return u=f.x-g[0]||0,c=f.y-g[1]||0,function t(e,n,r){var i,s=g;switch(e){case"start":p[h]=t,i=y++;break;case"end":delete p[h],--y;case"drag":g=Os(r||n,a),i=y}d.call(e,o,new Io(e,{sourceEvent:n,subject:f,target:_,identifier:h,active:i,x:g[0]+u,y:g[1]+c,dx:g[0]-s[0],dy:g[1]-s[1],dispatch:d}),l)}}return _.filter=function(t){return arguments.length?(a="function"==typeof t?t:Oo(!!t),_):a},_.container=function(t){return arguments.length?(l="function"==typeof t?t:Oo(t),_):l},_.subject=function(t){return arguments.length?(n="function"==typeof t?t:Oo(t),_):n},_.touchable=function(t){return arguments.length?(e="function"==typeof t?t:Oo(!!t),_):e},_.on=function(){var t=m.on.apply(m,arguments);return t===m?_:t},_.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,_):Math.sqrt(h)},_}var Ro=Math.sqrt(50),Ho=Math.sqrt(10),Uo=Math.sqrt(2);function Bo(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(Ro<=t?10:Ho<=t?5:Uo<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(Ro<=t?10:Ho<=t?5:Uo<=t?2:1)}function jo(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/n;return Ro<=r?n*=10:Ho<=r?n*=5:Uo<=r&&(n*=2),e<t?-n:n}function zo(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function qo(n){let i=n,s=n,o=n;function a(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}while(n<r)}return n}return 1===n.length&&(i=(t,e)=>n(t)-e,s=zo,o=(t,e)=>zo(n(t),e)),{left:a,center:function(t,e,n=0,r=t.length){return r=a(t,e,n,r-1),n<r&&i(t[r-1],e)>-i(t[r],e)?r-1:r},right:function(t,e,n=0,r=t.length){if(n<r){if(0!==s(e,e))return r;do{var i=n+r>>>1;o(t[i],e)<=0?n=1+i:r=i}while(n<r)}return n}}}function Go(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var J=qo(zo),rt=J.right,Xo=(J.left,qo(function(t){return null===t?NaN:+t}).center,rt);function Yo(t){return+t}var Wo=[0,1];function Vo(t){return t}function $o(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function Zo(t,e,n){var r=t[0],t=t[1],i=e[0],e=e[1],i=t<r?(r=$o(t,r),n(e,i)):(r=$o(r,t),n(i,e));return function(t){return i(r(t))}}function Ko(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=$o(n[o],n[o+1]),s[o]=e(t[o],t[o+1]);return function(t){var e=Xo(n,t,1,r)-1;return s[e](i[e](t))}}function Qo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Jo(){var n,r,e,i,s,o,a=Wo,l=Wo,h=Ns,u=Vo;function c(){var e,n,t,r=Math.min(a.length,l.length);return u!==Vo&&(e=a[0],(n=a[r-1])<e&&(t=e,e=n,n=t),u=function(t){return Math.max(e,Math.min(n,t))}),i=2<r?Ko:Zo,s=o=null,f}function f(t){return null==t||isNaN(t=+t)?e:(s=s||i(a.map(n),l,h))(n(u(t)))}return f.invert=function(t){return u(r((o=o||i(l,a.map(n),xs))(t)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Yo),c()):a.slice()},f.range=function(t){return arguments.length?(l=Array.from(t),c()):l.slice()},f.rangeRound=function(t){return l=Array.from(t),h=Go,c()},f.clamp=function(t){return arguments.length?(u=!!t||Vo,c()):u!==Vo},f.interpolate=function(t){return arguments.length?(h=t,c()):h},f.unknown=function(t){return arguments.length?(e=t,f):e},function(t,e){return n=t,r=e,c()}}function ta(){return Jo()(Vo,Vo)}function ea(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var na=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ra(t){if(!(e=na.exec(t)))throw new Error("invalid format: "+t);var e;return new ia({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ia(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}ra.prototype=ia.prototype,ia.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function sa(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function oa(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ha(e)/3)))-ha(Math.abs(t)))}function aa(t,e){return(e=sa(t,e))?(t=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")):t+""}var la,ha=function(t){return(t=sa(Math.abs(t)))?t[1]:NaN},ua=function(a,l){return function(t,e){for(var n=t.length,r=[],i=0,s=a[0],o=0;0<n&&0<s&&(e<o+s+1&&(s=Math.max(1,e-o)),r.push(t.substring(n-=s,n+s)),!((o+=s+1)>e));)s=a[i=(i+1)%a.length];return r.reverse().join(l)}},ca=function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}},fa=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;0<i&&(i=0)}return 0<i?t.slice(0,i)+t.slice(e+1):t},da={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>aa(100*t,e),r:aa,s:function(t,e){var n=sa(t,e);if(!n)return t+"";var r=n[0],i=n[1],n=i-(la=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,i=r.length;return n===i?r:i<n?r+new Array(n-i+1).join("0"):0<n?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+sa(t,Math.max(0,e+n-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},ga=function(t){return t},pa=Array.prototype.map,ma=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ya(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ha(e)-ha(t))+1}function _a(t){return Math.max(0,-ha(Math.abs(t)))}var va,wa=(va=function(t){var A=void 0===t.grouping||void 0===t.thousands?ga:ua(pa.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",b=void 0===t.decimal?".":t.decimal+"",k=void 0===t.numerals?ga:ca(pa.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"−":t.minus+"",T=void 0===t.nan?"NaN":t.nan+"";function o(t){var h=(t=ra(t)).fill,u=t.align,c=t.sign,e=t.symbol,f=t.zero,d=t.width,g=t.comma,p=t.precision,m=t.trim,y=t.type;"n"===y?(g=!0,y="g"):da[y]||(void 0===p&&(p=12),m=!0,y="g"),(f||"0"===h&&"="===u)&&(f=!0,h="0",u="=");var _="$"===e?r:"#"===e&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===e?i:/[%p]/.test(y)?s:"",w=da[y],x=/[defgprs%]/.test(y);function n(t){var e,n,r,i=_,s=v;if("c"===y)s=w(t)+s,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?T:w(Math.abs(t),p),m&&(t=fa(t)),i=((o=o&&0==+t&&"+"!==c?!1:o)?"("===c?c:M:"-"===c||"("===c?"":c)+i,s=("s"===y?ma[8+la/3]:"")+s+(o&&"("===c?")":""),x)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){s=(46===r?b+t.slice(e+1):t.slice(e))+s,t=t.slice(0,e);break}}g&&!f&&(t=A(t,1/0));var a=i.length+t.length+s.length,l=a<d?new Array(d-a+1).join(h):"";switch(g&&f&&(t=A(l+t,l.length?d-s.length:1/0),l=""),u){case"<":t=i+t+s+l;break;case"=":t=i+l+t+s;break;case"^":t=l.slice(0,a=l.length>>1)+i+t+s+l.slice(a);break;default:t=l+i+t+s}return k(t)}return p=void 0===p?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=ra(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(ha(e)/3))),r=Math.pow(10,-e),i=ma[8+e/3];return function(t){return n(r*t)+i}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,xa=va.formatPrefix;function Aa(h){var u=h.domain;return h.ticks=function(t){var e=u();return function(n,r,t){var e,i,s,o,a=-1;if(t=+t,(n=+n)===(r=+r)&&0<t)return[n];if((e=r<n)&&(i=n,n=r,r=i),0===(o=Bo(n,r,t))||!isFinite(o))return[];if(0<o){let t=Math.round(n/o),e=Math.round(r/o);for(t*o<n&&++t,e*o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)*o}else{o=-o;let t=Math.round(n*o),e=Math.round(r*o);for(t/o<n&&++t,e/o>r&&--e,s=new Array(i=e-t+1);++a<i;)s[a]=(t+a)/o}return e&&s.reverse(),s}(e[0],e[e.length-1],null==t?10:t)},h.tickFormat=function(t,e){var n=u();return function(t,e,n,r){var i,s=jo(t,e,n);switch((r=ra(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=oa(s,o))||(r.precision=i),xa(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=ya(s,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=_a(s))||(r.precision=i-2*("%"===r.type))}return wa(r)}(n[0],n[n.length-1],null==t?10:t,e)},h.nice=function(t){null==t&&(t=10);var e,n,r=u(),i=0,s=r.length-1,o=r[i],a=r[s],l=10;for(a<o&&(n=o,o=a,a=n,n=i,i=s,s=n);0<l--;){if((n=Bo(o,a,t))===e)return r[i]=o,r[s]=a,u(r);if(0<n)o=Math.floor(o/n)*n,a=Math.ceil(a/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,a=Math.floor(a*n)/n}e=n}return h},h}function ba(){var t=ta();return t.copy=function(){return Qo(t,ba())},ea.apply(t,arguments),Aa(t)}const ka=1e3,Ma=6e4,Ta=36e5,Sa=864e5,Na=7*Sa,Ea=(Sa,365*Sa);var Oa=new Date,Ia=new Date;function Ca(s,o,n,r){function a(t){return s(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return s(t=new Date(+t)),t},a.ceil=function(t){return s(t=new Date(t-1)),o(t,1),s(t),t},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},a.range=function(t,e,n){var r,i=[];if(t=a.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(;i.push(r=new Date(+t)),o(t,n),s(t),r<t&&t<e;);return i},a.filter=function(n){return Ca(function(t){if(t<=t)for(;s(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(a.count=function(t,e){return Oa.setTime(+t),Ia.setTime(+e),s(Oa),s(Ia),Math.floor(n(Oa,Ia))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var Pa=Ca(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Pa.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?Ca(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):Pa:null};var Da=Pa,nt=(Pa.range,Ca(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*ka)},function(t,e){return(e-t)/ka},function(t){return t.getUTCSeconds()})),Fa=nt,it=(nt.range,Ca(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ka)},function(t,e){t.setTime(+t+e*Ma)},function(t,e){return(e-t)/Ma},function(t){return t.getMinutes()})),La=it,J=(it.range,Ca(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ka-t.getMinutes()*Ma)},function(t,e){t.setTime(+t+e*Ta)},function(t,e){return(e-t)/Ta},function(t){return t.getHours()})),Ra=J,rt=(J.range,Ca(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ma)/Sa,t=>t.getDate()-1)),Ha=rt;rt.range;function Ua(e){return Ca(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ma)/Na})}var Ba=Ua(0),ja=Ua(1),nt=Ua(2),it=Ua(3),za=Ua(4),J=Ua(5),rt=Ua(6),nt=(Ba.range,ja.range,nt.range,it.range,za.range,J.range,rt.range,Ca(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),qa=nt,it=(nt.range,Ca(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));it.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Ca(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var Ga=it,J=(it.range,Ca(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Ma)},function(t,e){return(e-t)/Ma},function(t){return t.getUTCMinutes()})),Xa=J,rt=(J.range,Ca(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Ta)},function(t,e){return(e-t)/Ta},function(t){return t.getUTCHours()})),Ya=rt,nt=(rt.range,Ca(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Sa},function(t){return t.getUTCDate()-1})),Wa=nt;nt.range;function Va(e){return Ca(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Na})}var $a=Va(0),Za=Va(1),it=Va(2),J=Va(3),Ka=Va(4),rt=Va(5),nt=Va(6),nt=($a.range,Za.range,it.range,J.range,Ka.range,rt.range,nt.range,Ca(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),Qa=nt,nt=(nt.range,Ca(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));nt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Ca(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var Ja=nt;nt.range;function tl(a,t,e,n,r,i){const l=[[Fa,1,ka],[Fa,5,5e3],[Fa,15,15e3],[Fa,30,3e4],[i,1,Ma],[i,5,3e5],[i,15,9e5],[i,30,18e5],[r,1,Ta],[r,3,3*Ta],[r,6,6*Ta],[r,12,432e5],[n,1,Sa],[n,2,2*Sa],[e,1,Na],[t,1,2592e6],[t,3,7776e6],[a,1,Ea]];function o(t,e,n){var r=Math.abs(e-t)/n,i=qo(([,,t])=>t).right(l,r);if(i===l.length)return a.every(jo(t/Ea,e/Ea,n));if(0===i)return Da.every(Math.max(jo(t,e,n),1));const[s,o]=l[r/l[i-1][2]<l[i][2]/r?i-1:i];return s.every(o)}return[function(t,e,n){var r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:o(t,e,n),s=i?i.range(t,+e+1):[];return r?s.reverse():s},o]}const[el,nl]=tl(Ja,Qa,$a,Wa,Ya,Xa),[]=tl(Ga,qa,Ba,Ha,Ra,La);function rl(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function il(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sl(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ol(t){var r=t.dateTime,i=t.date,s=t.time,e=t.periods,n=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,h=dl(e),u=gl(e),c=dl(n),f=gl(n),d=dl(o),g=gl(o),p=dl(a),m=gl(a),y=dl(l),_=gl(l),v={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Fl,e:Fl,f:Bl,g:Kl,G:Jl,H:Ll,I:Rl,j:Hl,L:Ul,m:jl,M:zl,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ah,s:bh,S:ql,u:Gl,U:Xl,V:Wl,w:Vl,W:$l,x:null,X:null,y:Zl,Y:Ql,Z:th,"%":xh},w={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:eh,e:eh,f:oh,g:yh,G:vh,H:nh,I:rh,j:ih,L:sh,m:ah,M:lh,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ah,s:bh,S:hh,u:uh,U:ch,V:dh,w:gh,W:ph,x:null,X:null,y:mh,Y:_h,Z:wh,"%":xh},x={a:function(t,e,n){e=d.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){e=c.exec(e.slice(n));return e?(t.w=f.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){e=y.exec(e.slice(n));return e?(t.m=_.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){e=p.exec(e.slice(n));return e?(t.m=m.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return k(t,r,e,n)},d:Ml,e:Ml,f:Il,g:xl,G:wl,H:Sl,I:Sl,j:Tl,L:Ol,m:kl,M:Nl,p:function(t,e,n){e=h.exec(e.slice(n));return e?(t.p=u.get(e[0].toLowerCase()),n+e[0].length):-1},q:bl,Q:Pl,s:Dl,S:El,u:ml,U:yl,V:_l,w:pl,W:vl,x:function(t,e,n){return k(t,i,e,n)},X:function(t,e,n){return k(t,s,e,n)},y:xl,Y:wl,Z:Al,"%":Cl};function A(l,h){return function(t){var e,n,r,i=[],s=-1,o=0,a=l.length;for(t instanceof Date||(t=new Date(+t));++s<a;)37===l.charCodeAt(s)&&(i.push(l.slice(o,s)),null!=(n=al[e=l.charAt(++s)])?e=l.charAt(++s):n="e"===e?" ":"0",(r=h[e])&&(e=r(t,n)),i.push(e),o=s+1);return i.push(l.slice(o,s)),i.join("")}}function b(i,s){return function(t){var e,n,r=sl(1900,void 0,1);if(k(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!s||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(e=4<(n=(e=il(sl(r.y,0,1))).getUTCDay())||0===n?Za.ceil(e):Za(e),e=Wa.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=rl(sl(r.y,0,1))).getDay())||0===n?ja.ceil(e):ja(e),e=Ha.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?il(sl(r.y,0,1)).getUTCDay():rl(sl(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,il(r)):rl(r)}}function k(t,e,n,r){for(var i,s,o=0,a=e.length,l=n.length;o<a;){if(l<=r)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(s=x[i in al?e.charAt(o++):i])||(r=s(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return v.x=A(i,v),v.X=A(s,v),v.c=A(r,v),w.x=A(i,w),w.X=A(s,w),w.c=A(r,w),{format:function(t){var e=A(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=b(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=A(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=b(t+="",!0);return e.toString=function(){return t},e}}}var al={"-":"",_:" ",0:"0"},ll=/^\s*\d+/,hl=/^%/,ul=/[\\^$*+?|[\]().{}]/g;function cl(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",t=i.length;return r+(t<n?new Array(n-t+1).join(e)+i:i)}function fl(t){return t.replace(ul,"\\$&")}function dl(t){return new RegExp("^(?:"+t.map(fl).join("|")+")","i")}function gl(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function pl(t,e,n){e=ll.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function ml(t,e,n){e=ll.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function yl(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function _l(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function vl(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function wl(t,e,n){e=ll.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function xl(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function Al(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function bl(t,e,n){e=ll.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function kl(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function Ml(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function Tl(t,e,n){e=ll.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function Sl(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function Nl(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function El(t,e,n){e=ll.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function Ol(t,e,n){e=ll.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function Il(t,e,n){e=ll.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function Cl(t,e,n){e=hl.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function Pl(t,e,n){e=ll.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function Dl(t,e,n){e=ll.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function Fl(t,e){return cl(t.getDate(),e,2)}function Ll(t,e){return cl(t.getHours(),e,2)}function Rl(t,e){return cl(t.getHours()%12||12,e,2)}function Hl(t,e){return cl(1+Ha.count(Ga(t),t),e,3)}function Ul(t,e){return cl(t.getMilliseconds(),e,3)}function Bl(t,e){return Ul(t,e)+"000"}function jl(t,e){return cl(t.getMonth()+1,e,2)}function zl(t,e){return cl(t.getMinutes(),e,2)}function ql(t,e){return cl(t.getSeconds(),e,2)}function Gl(t){t=t.getDay();return 0===t?7:t}function Xl(t,e){return cl(Ba.count(Ga(t)-1,t),e,2)}function Yl(t){var e=t.getDay();return 4<=e||0===e?za(t):za.ceil(t)}function Wl(t,e){return t=Yl(t),cl(za.count(Ga(t),t)+(4===Ga(t).getDay()),e,2)}function Vl(t){return t.getDay()}function $l(t,e){return cl(ja.count(Ga(t)-1,t),e,2)}function Zl(t,e){return cl(t.getFullYear()%100,e,2)}function Kl(t,e){return cl((t=Yl(t)).getFullYear()%100,e,2)}function Ql(t,e){return cl(t.getFullYear()%1e4,e,4)}function Jl(t,e){var n=t.getDay();return cl((t=4<=n||0===n?za(t):za.ceil(t)).getFullYear()%1e4,e,4)}function th(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+cl(t/60|0,"0",2)+cl(t%60,"0",2)}function eh(t,e){return cl(t.getUTCDate(),e,2)}function nh(t,e){return cl(t.getUTCHours(),e,2)}function rh(t,e){return cl(t.getUTCHours()%12||12,e,2)}function ih(t,e){return cl(1+Wa.count(Ja(t),t),e,3)}function sh(t,e){return cl(t.getUTCMilliseconds(),e,3)}function oh(t,e){return sh(t,e)+"000"}function ah(t,e){return cl(t.getUTCMonth()+1,e,2)}function lh(t,e){return cl(t.getUTCMinutes(),e,2)}function hh(t,e){return cl(t.getUTCSeconds(),e,2)}function uh(t){t=t.getUTCDay();return 0===t?7:t}function ch(t,e){return cl($a.count(Ja(t)-1,t),e,2)}function fh(t){var e=t.getUTCDay();return 4<=e||0===e?Ka(t):Ka.ceil(t)}function dh(t,e){return t=fh(t),cl(Ka.count(Ja(t),t)+(4===Ja(t).getUTCDay()),e,2)}function gh(t){return t.getUTCDay()}function ph(t,e){return cl(Za.count(Ja(t)-1,t),e,2)}function mh(t,e){return cl(t.getUTCFullYear()%100,e,2)}function yh(t,e){return cl((t=fh(t)).getUTCFullYear()%100,e,2)}function _h(t,e){return cl(t.getUTCFullYear()%1e4,e,4)}function vh(t,e){var n=t.getUTCDay();return cl((t=4<=n||0===n?Ka(t):Ka.ceil(t)).getUTCFullYear()%1e4,e,4)}function wh(){return"+0000"}function xh(){return"%"}function Ah(t){return+t}function bh(t){return Math.floor(+t/1e3)}function kh(t){return new Date(t)}function Mh(t){return t instanceof Date?+t:+new Date(+t)}function Th(n,a,e,r,i,s,o,l,h,u){var c=ta(),f=c.invert,d=c.domain,g=u(".%L"),p=u(":%S"),m=u("%I:%M"),y=u("%I %p"),_=u("%a %d"),v=u("%b %d"),w=u("%B"),x=u("%Y");function A(t){return(h(t)<t?g:l(t)<t?p:o(t)<t?m:s(t)<t?y:r(t)<t?i(t)<t?_:v:e(t)<t?w:x)(t)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?d(Array.from(t,Mh)):d().map(kh)},c.ticks=function(t){var e=d();return n(e[0],e[e.length-1],null==t?10:t)},c.tickFormat=function(t,e){return null==e?A:u(e)},c.nice=function(t){var e,n,r,i,s,o=d();return(t=!t||"function"!=typeof t.range?a(o[0],o[o.length-1],null==t?10:t):t)?d((n=t,r=0,i=(e=(e=o).slice()).length-1,s=e[r],(t=e[i])<s&&(o=r,r=i,i=o,o=s,s=t,t=o),e[r]=n.floor(s),e[i]=n.ceil(t),e)):c},c.copy=function(){return Qo(c,Th(n,a,e,r,i,s,o,l,h,u))},c}var Sh,Nh=(Sh=ol({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,Eh=Sh.parse,Oh=Sh.utcFormat;Sh.utcParse;function Ih(t){return((t=Math.exp(t))+1/t)/2}(function n(f,d,g){function t(t,e){var r,i,s,n,o=t[0],a=t[1],l=t[2],h=e[0],t=e[1],e=e[2],u=h-o,c=t-a,h=u*u+c*c;return(n=h<1e-12?(s=Math.log(e/l)/f,function(t){return[o+t*u,a+t*c,l*Math.exp(f*t*s)]}):(r=Math.sqrt(h),t=(e*e-l*l+g*h)/(2*l*d*r),n=(e*e-l*l-g*h)/(2*e*d*r),i=Math.log(Math.sqrt(t*t+1)-t),s=(Math.log(Math.sqrt(n*n+1)-n)-i)/f,function(t){var e=t*s,n=Ih(i),t=l/(d*r)*(n*(t=f*e+i,((t=Math.exp(2*t))-1)/(t+1))-(t=i,((t=Math.exp(i))-1/t)/2));return[o+t*u,a+t*c,l*n/Ih(f*e+i)]})).duration=1e3*s*f/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t})(Math.SQRT2,2,4);function Ch(t,e,n){this.k=t,this.x=e,this.y=n}Ch.prototype={constructor:Ch,scale:function(t){return 1===t?this:new Ch(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Ch(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};function Ph(t){return null!=t&&-1<t}class Dh{constructor(t,e){this.color="#3366cc",this.showColor=!0,this.filter=!1,this.priority=0,this.id=t,this.name="Selection-"+this.id,this.elementIds=[],this.acceptedType=e,this.priority=t}acceptsType(t){return this.acceptedType==t}}class Fh{constructor(t){this.name=t}}Nh("%m/%d/%Y"),Nh("%d/%m/%Y");const Lh="%Y-%m-%d %H:%M:%S",Rh=Eh(Lh),Hh=Nh(Lh),Uh={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6,milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:2592e6,years:31536e6};Nh("%w");function Bh(t,e){const n=Nh("%V"),r=new Date(t);switch(e){case 0:return r.getUTCMilliseconds();case 1:return r.getUTCSeconds();case 2:return r.getUTCMinutes();case 3:return r.getUTCHours();case 4:return r.getUTCDay();case 5:return parseInt(n(r));case 6:return r.getUTCMonth()+1;default:return r.getUTCFullYear()}}const jh=["millisecond","second","minute","hour","day","week","month","year","decade","century","millenium"],zh="[*dgraph*]",qh=!1;function Gh(t,e,n){return n==zh?t:n}class Xh{constructor(){this.BOOKMARK_COLORS=this.default_colors,this.selectionColor_pointer=0,this.name="",this.gran_min=0,this.gran_max=Number.MAX_VALUE,this.minWeight=1e7,this.maxWeight=-1e7,this._nodes=[],this._links=[],this.directed=!1,this._nodePairs=[],this._locations=[],this._times=[],this.timeObjects=[],this.nodeOrders=[],this.matrix=[],this.selections=[],this.nodeArrays=new Wh,this.linkArrays=new Vh,this.nodePairArrays=new $h,this.timeArrays=new Zh,this.linkTypeArrays=new Kh,this.nodeTypeArrays=new Qh,this.locationArrays=new Jh,this.attributeArrays={node:this.nodeArrays,link:this.linkArrays,time:this.timeArrays,nodePair:this.nodePairArrays,linkType:this.linkTypeArrays,nodeType:this.nodeTypeArrays,location:this.locationArrays},this.highlightArrays=new vu,this.highlightFreezeArrays=new vu,this.currentSelection_id=0,this.defaultLinkSelection=this.createSelection("link"),this.defaultNodeSelection=this.createSelection("node"),this.gran_min_NAME="gran_min",this.gran_max_NAME="gran_max_NAME",this.directed_NAME="directed_NAME",this.minWeight_NAME="minWeight_NAME",this.maxWeight_NAME="maxWeight_NAME",this.matrix_NAME="matrix_NAME",this.nodeArrays_NAME="nodeArrays_NAME",this.linkArrays_NAME="linkArrays_NAME",this.nodePairArrays_NAME="nodePairArrays_NAME",this.timeArrays_NAME="timeArrays_NAME",this.linkTypeArrays_NAME="linkTypeArrays_NAME",this.nodeTypeArrays_NAME="nodeTypeArrays_NAME",this.locationArrays_NAME="locationArrays_NAME"}default_colors(t){var e=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"];return e[t%e.length]}attr(t,e,n){let r;try{r=this.attributeArrays[n][t][e]}catch(t){r=void 0}return r}standardArrayReplacer(t,e){return e instanceof Xh?(console.log("standardReplacer found a DynamicGraph property",t),zh):"selections"!=t?e:void 0}static timeReviver(t,e,n){return""==t?wu(e,new au(e.id,n)):Gh(n,0,e)}static nodeArrayReviver(t,e,n){switch(t){case"":return wu(e,new Wh);case"outLinks":case"inLinks":case"links":return xu(e,function(){return new su});case"outNeighbors":case"inNeighbors":case"neighbors":return xu(e,function(){return new su});case"locations":return xu(e,function(){return new iu});default:return e}}static linkArrayReviver(t,e,n){switch(t){case"":return wu(e,new Vh);case"weights":return xu(e,function(){return new iu});default:return e}}static nodePairArrayReviver(t,e,n){return""!==t?e:wu(e,new $h)}static timeArrayReviver(t,e,n){switch(t){case"":return wu(e,new Zh);case"time":return e.map(function(t,e){return new Date(t)});default:return e}}static linkTypeArrayReviver(t,e,n){return""!==t?e:wu(e,new Kh)}static nodeTypeArrayReviver(t,e,n){return""!==t?e:wu(e,new Qh)}static locationArrayReviver(t,e,n){return""!==t?e:wu(e,new Jh)}loadDynamicGraph(t,e){this.clearSelections(),this.name=e;e=t.getFromStorage(this.name,this.gran_min_NAME);null!=e&&(this.gran_min=e);e=t.getFromStorage(this.name,this.gran_max_NAME);null!=e&&(this.gran_max=e);e=t.getFromStorage(this.name,this.directed_NAME);null!=e&&(this.directed=e);e=t.getFromStorage(this.name,this.minWeight_NAME);null!=e&&(this.minWeight=e);e=t.getFromStorage(this.name,this.maxWeight_NAME);null!=e&&(this.maxWeight=e);e=t.getFromStorage(this.name,this.matrix_NAME);null!=e&&(this.matrix=e);e=t.getFromStorage(this.name,this.nodeArrays_NAME,Xh.nodeArrayReviver);null!=e&&(this.nodeArrays=e);e=t.getFromStorage(this.name,this.linkArrays_NAME,Xh.linkArrayReviver);null!=e&&(this.linkArrays=e);e=t.getFromStorage(this.name,this.nodePairArrays_NAME,Xh.nodePairArrayReviver);null!=e&&(this.nodePairArrays=e);e=t.getFromStorage(this.name,this.timeArrays_NAME,Xh.timeArrayReviver);if(null!=e&&(this.timeArrays=e),"timeArrays"in this&&this.timeArrays)if("momentTime"in this.timeArrays&&"unixTime"in this.timeArrays){const n=this.timeArrays.momentTime;for(let t=0;t<n.length;t++)n[t]=new Date(this.timeArrays.unixTime[t])}else"unixTime"in this.timeArrays?(console.log("No time in timeArrays"),this.timeArrays.momentTime=this.timeArrays.unixTime.map(new Date)):(console.log("No time or unixTime in timeArrays"),this.timeArrays.momentTime=[]);else console.log("No timeArrays"),this.timeArrays=new Zh;e=t.getFromStorage(this.name,this.linkTypeArrays_NAME,Xh.linkTypeArrayReviver);null!=e&&(this.linkTypeArrays=e);e=t.getFromStorage(this.name,this.nodeTypeArrays_NAME,Xh.nodeTypeArrayReviver);null!=e&&(this.nodeTypeArrays=e);t=t.getFromStorage(this.name,this.locationArrays_NAME,Xh.locationArrayReviver);null!=t&&(this.locationArrays=t),this.attributeArrays={node:this.nodeArrays,link:this.linkArrays,time:this.timeArrays,nodePair:this.nodePairArrays,linkType:this.linkTypeArrays,nodeType:this.nodeTypeArrays,location:this.locationArrays},this.createGraphObjects(!0,!0),this.createSelections(!0)}saveDynamicGraph(t){t.saveToStorage(this.name,this.gran_min_NAME,this.gran_min),t.saveToStorage(this.name,this.gran_max_NAME,this.gran_max),t.saveToStorage(this.name,this.directed_NAME,this.directed),t.saveToStorage(this.name,this.minWeight_NAME,this.minWeight),t.saveToStorage(this.name,this.maxWeight_NAME,this.maxWeight),t.saveToStorage(this.name,this.matrix_NAME,this.matrix),t.saveToStorage(this.name,this.nodeArrays_NAME,this.nodeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.linkArrays_NAME,this.linkArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.nodePairArrays_NAME,this.nodePairArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.timeArrays_NAME,this.timeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.linkTypeArrays_NAME,this.linkTypeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.nodeTypeArrays_NAME,this.nodeTypeArrays,this.standardArrayReplacer),t.saveToStorage(this.name,this.locationArrays_NAME,this.locationArrays,this.standardArrayReplacer)}delete(t){t.removeFromStorage(this.name,this.gran_min_NAME),t.removeFromStorage(this.name,this.gran_max_NAME),t.removeFromStorage(this.name,this.directed_NAME),t.removeFromStorage(this.name,this.minWeight_NAME),t.removeFromStorage(this.name,this.maxWeight_NAME),t.removeFromStorage(this.name,this.matrix_NAME),t.removeFromStorage(this.name,this.nodeArrays_NAME),t.removeFromStorage(this.name,this.linkArrays_NAME),t.removeFromStorage(this.name,this.nodePairArrays_NAME),t.removeFromStorage(this.name,this.timeArrays_NAME),t.removeFromStorage(this.name,this.linkTypeArrays_NAME),t.removeFromStorage(this.name,this.nodeTypeArrays_NAME),t.removeFromStorage(this.name,this.locationArrays_NAME)}debugCompareTo(t){let e=!0;return this.name!=t.name&&(console.log("name different"),e=!1),this.gran_min!=t.gran_min&&(console.log("gran_min different",this.gran_min,t.gran_min),e=!1),this.gran_max!=t.gran_max&&(console.log("gran_max different",this.gran_max,t.gran_max),e=!1),this.directed!=t.directed&&(console.log("directed different",this.directed,t.directed),e=!1),this._nodes.length==t._nodes.length&&Au(this._nodes,t._nodes,2)||(console.log("nodes different"),e=!1),this._links.length==t._links.length&&Au(this._links,t._links,2)||(console.log("links different"),e=!1),this._nodePairs.length==t._nodePairs.length&&Au(this._nodePairs,t._nodePairs,2)||(console.log("nodePairs different"),e=!1),this._locations.length==t._locations.length&&Au(this._locations,t._locations,2)||(console.log("locations different"),e=!1),this._times.length==t._times.length&&Au(this._times,t._times,2)||(console.log("times different"),e=!1),(this.nodeOrders&&this.nodeOrders.length!=t.nodeOrders.length||!Au(this.nodeOrders,t.nodeOrders,2))&&(console.log("nodeOrders different",this.nodeOrders,t.nodeOrders),e=!1),this.matrix.length==t.matrix.length&&Au(this.matrix,t.matrix,2)||(console.log("matrix different",this.matrix,t.matrix),e=!1),this.nodeArrays.length==t.nodeArrays.length&&Au(this.nodeArrays,t.nodeArrays,2)||(console.log("nodeArrays different",this.nodeArrays,t.nodeArrays),e=!1),this.linkArrays.length==t.linkArrays.length&&Au(this.linkArrays,t.linkArrays,2)||(console.log("linkArrays different",this.linkArrays,t.linkArrays),e=!1),this.nodePairArrays.length==t.nodePairArrays.length&&Au(this.nodePairArrays,t.nodePairArrays,2)||(console.log("nodePairArrays different",this.nodePairArrays,t.nodePairArrays),e=!1),this.timeArrays.length==t.timeArrays.length&&Au(this.timeArrays,t.timeArrays,2)||(console.log("timeArrays different",this.timeArrays,t.timeArrays),e=!1),this.linkTypeArrays.length==t.linkTypeArrays.length&&Au(this.linkTypeArrays,t.linkTypeArrays,2)||(console.log("linkTypeArrays different",this.linkTypeArrays,t.linkTypeArrays),e=!1),this.nodeTypeArrays.length==t.nodeTypeArrays.length&&Au(this.nodeTypeArrays,t.nodeTypeArrays,2)||(console.log("nodeTypeArrays different",this.nodeTypeArrays,t.nodeTypeArrays),e=!1),this.locationArrays.length==t.locationArrays.length&&Au(this.locationArrays,t.locationArrays,2)||(console.log("locationArrays different",this.locationArrays,t.locationArrays),e=!1),this.defaultLinkSelection.elementIds.length==t.defaultLinkSelection.elementIds.length&&Au(this.defaultLinkSelection,t.defaultLinkSelection,2)||(console.log("defaultLinkSelection different",this.defaultLinkSelection,t.defaultLinkSelection),e=!1),this.defaultNodeSelection.elementIds.length==t.defaultNodeSelection.elementIds.length&&Au(this.defaultNodeSelection,t.defaultNodeSelection,2)||(console.log("defaultNodeSelection different",this.defaultNodeSelection,t.defaultNodeSelection),e=!1),this.selections.length==t.selections.length&&Au(this.selections,t.selections,2)||(console.log("selections different",this.selections,t.selections),e=!1),e}initDynamicGraph(n){var r,e,i,s,o,a;this.clearSelections(),console.log("[dynamicgraph.ts] Create dynamic graph for ",n.name,n),this.name=n.name,this.directed=n.directed,this.gran_min=0,this.gran_max=0;let l;const h=[];let u;if(Ph(n.linkSchema.time)){console.log("GEtting unix times for all times - linktable"),console.log(n.linkTable);for(let t=0;t<n.linkTable.length;t++)l=n.linkTable[t][n.linkSchema.time],console.log(n.linkTable[t]),u=null===(r=Rh(l))||void 0===r?void 0:r.getTime(),null!=u&&-1==h.indexOf(u)&&h.push(u);h.sort(bu);let e=99999999999999;for(let t=0;t<h.length-2;t++)e=Math.min(e,h[t+1]-h[t]);1e3<=e&&(this.gran_min=1),6e4<=e&&(this.gran_min=2),36e5<=e&&(this.gran_min=3),864e5<=e&&(this.gran_min=4),6048e5<=e&&(this.gran_min=5),2592e6<=e&&(this.gran_min=6),31104e6<=e&&(this.gran_min=7),31104e7<=e&&(this.gran_min=8),31104e8<=e&&(this.gran_min=9),31104e9<=e&&(this.gran_min=10),e=h[h.length-1]-h[0],this.gran_max=0,1e3<=e&&(this.gran_max=1),6e4<=e&&(this.gran_max=2),36e5<=e&&(this.gran_max=3),864e5<=e&&(this.gran_max=4),6048e5<=e&&(this.gran_max=5),2592e6<=e&&(this.gran_max=6),31104e6<=e&&(this.gran_max=7),31104e7<=e&&(this.gran_max=8),31104e8<=e&&(this.gran_max=9),31104e9<=e&&(this.gran_max=10),console.log("[Dynamic Graph] Minimal granularity",jh[this.gran_min]),console.log("[Dynamic Graph] Maximal granularity",jh[this.gran_max]);for(let t=0;t<h.length;t++)this.timeArrays.id.push(t),this.timeArrays.momentTime.push(new Date(h[t])),this.timeArrays.label.push(Hh(this.timeArrays.momentTime[t])),this.timeArrays.unixTime.push(h[t]),this.timeArrays.selections.push([]),this.timeArrays.filter.push(!1),this.timeArrays.links.push([]),this._times.push(new au(t,this));for(let t=0;t<=jh.length;t++)this.timeObjects.push([])}if(0==this.timeArrays.length&&(this.timeArrays.id.push(0),this.timeArrays.momentTime.push(new Date(0)),this.timeArrays.unixTime.push(0),this.timeArrays.selections.push([]),this.timeArrays.filter.push(!1),this.timeArrays.links.push([]),this._times.push(new au(0,this))),console.assert(!n.locationTable||Ph(n.locationSchema.id)),n.locationTable)for(let t=0;t<n.locationTable.length;t++)this.locationArrays.id.push(n.locationTable[t][n.locationSchema.id]),this.locationArrays.label.push(n.locationTable[t][n.locationSchema.label]),this.locationArrays.longitude.push(n.locationTable[t][n.locationSchema.longitude]),this.locationArrays.latitude.push(n.locationTable[t][n.locationSchema.latitude]),this.locationArrays.x.push(n.locationTable[t][n.locationSchema.x]),this.locationArrays.y.push(n.locationTable[t][n.locationSchema.y]),this.locationArrays.z.push(n.locationTable[t][n.locationSchema.z]),this.locationArrays.radius.push(n.locationTable[t][n.locationSchema.radius]);"id"in this.locationArrays&&console.log("locations",this.locationArrays.id.length);let c,f,d;console.assert(0==n.nodeTable.length||Ph(n.nodeSchema.id),"either there is no nodeTable data, or we have a schema for the nodetable");let g,p;const m=[];for(const t in n.nodeSchema)Object.prototype.hasOwnProperty.call(n.nodeSchema,t)&&"id"!=t&&"label"!=t&&"time"!=t&&"name"!=t&&"nodeType"!=t&&"location"!=t&&"constructor"!=t&&(m.push(t),this.nodeArrays[t]=[]);for(let t=0;t<n.nodeTable.length;t++){if(c=n.nodeTable[t],e=c[n.nodeSchema.id],f=this.nodeArrays.id.indexOf(e),-1==f&&(f=this.nodeArrays.id.length,this.nodeArrays.id.push(e),this.nodeArrays.nodeType.push(""),this.nodeArrays.outLinks.push(new su),this.nodeArrays.inLinks.push(new su),this.nodeArrays.links.push(new su),this.nodeArrays.outNeighbors.push(new su),this.nodeArrays.inNeighbors.push(new su),this.nodeArrays.neighbors.push(new su),this.nodeArrays.selections.push([]),this.nodeArrays.filter.push(!1),this.nodeArrays.locations.push(new iu),this.nodeArrays.attributes.push(new Object),this.nodeArrays.color.push(""),this.nodeArrays.shape.push(""),Ph(n.nodeSchema.label)?this.nodeArrays.label.push(c[n.nodeSchema.label]):this.nodeArrays.label.push(c[n.nodeSchema.id])),d=Ph(n.nodeSchema.time)?(l=c[n.nodeSchema.time],console.log("params"),console.log(l),console.log(Lh),console.log(null===(i=Rh(l))||void 0===i?void 0:i.toUTCString()),console.log(null===(i=Rh(l))||void 0===i?void 0:i.getTime()),i=this.getTimeIdForUnixTime(null===(i=Rh(l))||void 0===i?void 0:i.getTime()),null==l||null==i?this._times[0]:this._times[i]):this._times[0],null==d&&(d=this._times[0]),Ph(n.nodeSchema.location)){var y=c[n.nodeSchema.location];if(null==y)continue;this.nodeArrays.locations[e].set(d,y)}Ph(n.nodeSchema.shape)&&(y=c[n.nodeSchema.shape],this.nodeArrays.shape.push(y)),Ph(n.nodeSchema.nodeType)&&(g=n.nodeTable[t][n.nodeSchema.nodeType],p=this.nodeTypeArrays.name.indexOf(g),p<0&&(p=this.nodeTypeArrays.length,this.nodeTypeArrays.id.push(p),this.nodeTypeArrays.name.push(g)),this.nodeArrays.nodeType[f]=g,n.nodeTable[t][n.nodeSchema.nodeType]=p);for(let t=0;t<m.length;t++){var _=m[t];this.nodeArrays[_].push(c[n.nodeSchema[_]])}}if("id"in this.nodeArrays)for(let t=0;t<this.nodeArrays.id.length;t++)this.matrix.push(function(t,e){const n=[];for(;e--;)n[e]=t;return n}(void 0,this.nodeArrays.id.length));let v,w;const x=[];for(const S in n.linkSchema)Object.prototype.hasOwnProperty.call(n.linkSchema,S)&&"id"!=S&&"linkType"!=S&&"time"!=S&&"name"!=S&&"source"!=S&&"target"!=S&&"weight"!=S&&"directed"!=S&&(x.push(S),this.linkArrays[S]=[]);console.log("linkUserProperties",x),console.assert(0==n.linkTable.length||Ph(n.linkSchema.id)&&Ph(n.linkSchema.source)&&Ph(n.linkSchema.target),"either there are no links, or the linkschema is defined");for(let t=0;t<n.linkTable.length;t++){c=n.linkTable[t],o=c[n.linkSchema.id],this.linkArrays.directed.push(!1),-1==this.linkArrays.id.indexOf(o)&&(this.linkArrays.id[o]=o,this.linkArrays.source[o]=c[n.linkSchema.source],this.linkArrays.target[o]=c[n.linkSchema.target],this.linkArrays.linkType[o]=c[n.linkSchema.linkType],this.linkArrays.directed[o]=c[n.linkSchema.directed],this.linkArrays.weights[o]=new iu,this.linkArrays.presence[o]=[],this.linkArrays.selections.push([]),this.linkArrays.nodePair.push(void 0),this.linkArrays.filter.push(!1)),v=Ph(n.linkSchema.time)?(l=n.linkTable[t][n.linkSchema.time],u=null===(s=Rh(l))||void 0===s?void 0:s.getTime(),null!=(a=u?this.getTimeIdForUnixTime(u):void 0)?a:0):0,d=this._times[v],this.linkArrays.presence[o].push(v),Ph(n.linkSchema.weight)&&null!=n.linkTable[t][n.linkSchema.weight]?(this.linkArrays.weights[o].set(d,n.linkTable[t][n.linkSchema.weight]),this.minWeight=Math.min(this.minWeight,n.linkTable[t][n.linkSchema.weight]),this.maxWeight=Math.max(this.maxWeight,n.linkTable[t][n.linkSchema.weight])):(this.minWeight=0,this.maxWeight=1,this.linkArrays.weights[o].set(d,1)),s=this.nodeArrays.id.indexOf(c[n.linkSchema.source]),a=this.nodeArrays.id.indexOf(c[n.linkSchema.target]),this.nodeArrays.neighbors[s].add(d,a),this.nodeArrays.neighbors[a].add(d,s),this.nodeArrays.links[s].add(d,o),this.nodeArrays.links[a].add(d,o),this.linkArrays.directed[t]&&(this.nodeArrays.outNeighbors[s].add(d,a),this.nodeArrays.inNeighbors[a].add(d,s),this.nodeArrays.outLinks[s].add(d,o),this.nodeArrays.inLinks[a].add(d,o)),w=this.matrix[s][a],Ph(w)||(w=this.nodePairArrays.length,this.matrix[s][a]=w,this.nodePairArrays.id.push(w),this.nodePairArrays.source.push(s),this.nodePairArrays.target.push(a),this.nodePairArrays.links.push([]),this.nodePairArrays.selections.push([]),this.nodePairArrays.filter.push(!1)),-1==this.nodePairArrays.links[w].indexOf(o)&&(this.nodePairArrays.links[w].push(o),this.linkArrays.nodePair[o]=w),Ph(n.linkSchema.linkType)&&(g=n.linkTable[t][n.linkSchema.linkType],p=this.linkTypeArrays.name.indexOf(g),p<0&&(p=this.linkTypeArrays.length,this.linkTypeArrays.id.push(p),this.linkTypeArrays.name.push(g)),n.linkTable[t][n.linkSchema.linkType]=p);for(let t=0;t<x.length;t++){var A=x[t];this.linkArrays[A].push(c[n.linkSchema[A]])}}for(let e=0;e<this.linkArrays.length;e++)for(let t=0;t<this.timeArrays.length;t++)this.linkArrays.weights[e]&&Object.prototype.hasOwnProperty.call(this.linkArrays.weights[e].toArray(),this.timeArrays.id[t].toString())&&this.timeArrays.links[t].push(this.linkArrays.id[e]);const b=new Set(["#e4549b","#a33a36","#bd6221","#dfba47","#b5b867","#479b7f","#335b8e","#78387d"]),k={};this.nodeArrays.color.forEach(function(t){var e;k[t]||(e=(e=Array.from(b))[Math.floor(Math.random()*e.length)],k[t]=e,b.delete(e))});const M=new Set(["cross","diamond","square","triangle"]),T={};this.nodeArrays.shape.forEach(function(t){var e;T[t]||(e=(e=Array.from(M))[Math.floor(Math.random()*e.length)],T[t]=e,M.delete(e))}),console.log("[Dynamic Graph] Dynamic Graph created: ",this.nodeArrays.length),console.log("[Dynamic Graph]    - Nodes: ",this.nodeArrays.length),console.log("[Dynamic Graph]    - Edges: ",this.linkArrays.length),console.log("[Dynamic Graph]    - Times: ",this.timeArrays.length),console.log("[Dynamic Graph]    - Link types: ",this.linkTypeArrays.length),console.log("[Dynamic Graph]    - Node Pairs: ",this.nodePairArrays.length),console.log('>>>this.nodeArrays["neighbors"][0]',this.nodeArrays.neighbors[0]),this.createGraphObjects(!0,!0),this.createSelections(!1)}createSelections(t){if(t){"nodeArrays"in this&&this.nodeArrays||(this.nodeArrays=new Wh,this.linkArrays=new Vh,this.timeArrays=new Zh,this.nodePairArrays=new $h),this.nodeArrays.selections=new Array(this.nodeArrays.length);for(let t=0;t<this.nodeArrays.selections.length;t++)this.nodeArrays.selections[t]=[];this.linkArrays.selections=new Array(this.linkArrays.length);for(let t=0;t<this.linkArrays.selections.length;t++)this.linkArrays.selections[t]=[];this.timeArrays.selections=new Array(this.timeArrays.length);for(let t=0;t<this.timeArrays.selections.length;t++)this.timeArrays.selections[t]=[];this.nodePairArrays.selections=new Array(this.nodePairArrays.length);for(let t=0;t<this.nodePairArrays.selections.length;t++)this.nodePairArrays.selections[t]=[]}this.defaultNodeSelection=this.createSelection("node"),this.defaultNodeSelection.name="Unselected";for(let t=0;t<this._nodes.length;t++)this.defaultNodeSelection.elementIds.push(t),this.addToAttributeArraysSelection(this.defaultNodeSelection,"node",this._nodes[t].id());this.defaultNodeSelection.color="#000000",this.defaultNodeSelection.showColor=!1,this.defaultNodeSelection.priority=1e4,this.selectionColor_pointer--,this.defaultLinkSelection=this.createSelection("link"),this.defaultLinkSelection.name="Unselected";for(let t=0;t<this._links.length;t++)this.defaultLinkSelection.elementIds.push(t),this.addToAttributeArraysSelection(this.defaultLinkSelection,"link",this._links[t].id());this.defaultLinkSelection.color="#000000",this.defaultLinkSelection.showColor=!1,this.defaultLinkSelection.priority=1e4,this.selectionColor_pointer--;let e=[],n,r,i;const s=[];for(let t=0;t<this.nodeArrays.nodeType.length;t++)n=this.nodeArrays.nodeType[t],null!=n&&0!=n.length&&"undefined"!=n&&(r=e.indexOf(n),-1==r?(i=this.createSelection("node"),i.name=n,s.push(i),e.push(n)):i=s[r],this.addElementToSelection(i,this._nodes[t]));1==s.length&&(console.log("nodeSelections[0]:",s[0]),s[0].color="#444"),e=[];const o=[];for(let t=0;t<this.linkArrays.linkType.length;t++)n=this.linkArrays.linkType[t],n&&"undefined"!=n&&(r=e.indexOf(n),-1==r?(i=this.createSelection("link"),i.name=n,o.push(i),e.push(n)):i=o[r],this.addElementToSelection(i,this._links[t]));1==o.length&&(o[0].color="#444"),this.currentSelection_id=0}createGraphObjects(t,e){console.log("[DynamicNetwork:createGraph()] >>> ");var n,r=Date.now();if(this.locationArrays&&"id"in this.locationArrays)for(let t=0;t<this.locationArrays.id.length;t++)this._locations.push(new uu(this.locationArrays.id[t],this));else this.locationArrays=new Jh;const i=[];if("nodeArrays"in this&&this.nodeArrays)for(let t=0;t<this.nodeArrays.id.length;t++)i.push(new mu(t,this));const s=[];if("linkArrays"in this&&this.linkArrays)for(let t=0;t<this.linkArrays.source.length;t++)n=new _u(t,this),s.push(n);if("nodePairArrays"in this&&this.nodePairArrays)for(let t=0;t<this.nodePairArrays.length;t++)this.nodePairArrays.links[t],this._nodePairs.push(new fu(t,this));if(this._nodes=i,this._links=s,t){this._times=[];for(let t=0;t<this.timeArrays.length;t++)this._times.push(new au(t,this))}console.log("[DynamicNetwork:getGraph()] <<< ",Date.now()-r,"msec")}nodeAttr(t,e){return this.attr(t,e,"node")}linkAttr(t,e){return this.attr(t,e,"link")}pairAttr(t,e){return this.attr(t,e,"nodePair")}timeAttr(t,e){return this.attr(t,e,"time")}get startTime(){return this._times[0]}get endTime(){return this._times[this._times.length-1]}highlight(t,e){if("freeze"==t)return this.highlight("resetFreeze"),void this.highlight("addFreeze",e);if("unfreeze"==t)return this.highlightFreezeArrays.nodeIds=[],this.highlightFreezeArrays.linkIds=[],this.highlightFreezeArrays.nodePairIds=[],void(this.highlightFreezeArrays.timeIds=[]);if("reset"==t)return this.highlightArrays.nodeIds=[],this.highlightArrays.linkIds=[],this.highlightArrays.nodePairIds=[],void(this.highlightArrays.timeIds=[]);if(e){if("set"==t)return this.highlight("reset"),void this.highlight("add",e);if("add"==t)for(const i in e)for(let t=0;t<e[i].length;t++)this.highlightArrays[i].push(e[i][t]);else if("remove"==t){var n;for(const s in e)for(let t=0;t<e[s].length;t++)0<=(n=this.highlightArrays[s].indexOf(e[s][t]))&&this.highlightArrays[s].splice(n,1)}if("addFreeze"==t)for(const o in e)for(let t=0;t<e[o].length;t++)this.highlightFreezeArrays[o].push(e[o][t]);else if("removeFreeze"==t){var r;for(const a in e)for(let t=0;t<e[a].length;t++)0<=(r=this.highlightFreezeArrays[a].indexOf(e[a][t]))&&this.highlightFreezeArrays[a].splice(r,1)}}else console.error("[DynamicGraph] highlight: idCompound not set!")}selection(t,e,n){null==n&&(n=this.currentSelection_id);const r=this.getSelection(n);if(r)if("set"==t){const i=new vu;i[r.acceptedType]=r.elementIds,this.selection("remove",i,n),this.selection("add",e,n)}else"add"==t?(e.linkIds.forEach(t=>this.addToSelectionByTypeAndId(r,"link",t)),e.nodeIds.forEach(t=>this.addToSelectionByTypeAndId(r,"node",t)),e.timeIds.forEach(t=>this.addToSelectionByTypeAndId(r,"time",t)),e.nodePairIds.forEach(t=>this.addToSelectionByTypeAndId(r,"nodePair",t))):"remove"==t&&(e.linkIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"link",t)),e.nodeIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"node",t)),e.timeIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"time",t)),e.nodePairIds.forEach(t=>this.removeFromSelectionByTypeAndId(r,"nodePair",t)));else console.error("[DynamicGraph] Selection with ",n,"not found in ",this.selections)}addToAttributeArraysSelection(e,n,r){var i=this.attributeArrays[n].selections[r];for(let t=0;t<i.length;t++)if(i[t].priority>e.priority)return void this.attributeArrays[n].selections[r].splice(t,0,e);this.attributeArrays[n].selections[r].push(e)}removeFromAttributeArraysSelection(e,n,r){var i=this.attributeArrays[n].selections[r];for(let t=0;t<i.length;t++)i[t]==e&&this.attributeArrays[n].selections[r].splice(t,1)}addElementToSelection(t,e){this.addToSelectionByTypeAndId(t,e.type,e.id())}addToSelectionByTypeAndId(e,n,r){if(n==e.acceptedType){e.elementIds.push(r),this.addToAttributeArraysSelection(e,n,r);let t;"node"==n?(t=this.defaultNodeSelection.elementIds.indexOf(r),-1<t&&(this.removeFromAttributeArraysSelection(this.defaultNodeSelection,n,r),this.defaultNodeSelection.elementIds.splice(t,1))):"link"==n&&(t=this.defaultLinkSelection.elementIds.indexOf(r),-1<t&&(this.removeFromAttributeArraysSelection(this.defaultLinkSelection,n,r),this.defaultLinkSelection.elementIds.splice(t,1)))}else console.log("attempting to put object of the wrong type into a selection")}removeElementFromSelection(t,e){this.removeFromSelectionByTypeAndId(t,e.type,e.id())}removeFromSelectionByTypeAndId(t,e,n){var r=t.elementIds.indexOf(n);-1!=r&&(t.elementIds.splice(r,1),this.removeFromAttributeArraysSelection(t,e,n),0==this.getSelectionsByTypeAndId(e,n).length&&("node"==e?(this.defaultNodeSelection.elementIds.push(n),this.addToAttributeArraysSelection(this.defaultNodeSelection,e,n)):"link"==e&&(this.defaultLinkSelection.elementIds.push(n),this.addToAttributeArraysSelection(this.defaultLinkSelection,e,n))))}getSelectionsByTypeAndId(t,e){return this.attributeArrays[t].selections[e]}filterSelection(t,e){const n=this.getSelection(t);null!=n&&(n.filter=e)}isFiltered(t,e){return this.attributeArrays[e+"s"].filter}isHighlighted(t,e){return-1<this.highlightArrays[e+"Ids"].indexOf(t)||-1<this.highlightFreezeArrays[e+"Ids"].indexOf(t)}isFrozen(t,e){return-1<this.highlightFreezeArrays[e+"Ids"].indexOf(t)}getHighlightedIds(t){return this.highlightArrays[t+"Ids"]}setCurrentSelection(t){console.log("[DynamicGraph] setCurrentSelectionId ",t),this.currentSelection_id=t}getCurrentSelection(){return this.getSelection(this.currentSelection_id)}addSelection(t,e,n,r){const i=this.createSelection(n);i.id=t,i.color=e,i.priority=r}createSelection(t){const e=new Dh(this.selections.length,t);return e.color=this.BOOKMARK_COLORS(this.selectionColor_pointer%10),this.selectionColor_pointer++,this.selections.push(e),e}deleteSelection(t){const e=this.getSelection(t);if(null!=e){const n=new vu;n[e.acceptedType+"Ids"]=e.elementIds.slice(0),console.log("Delete selection->remove elemeents",e.elementIds.slice(0)),this.selection("remove",n,e.id),this.selections.splice(this.selections.indexOf(e),1)}}setSelectionColor(t,e){const n=this.getSelection(t);n&&(n.color=e)}getSelections(e){const n=[];if(e){for(let t=0;t<this.selections.length;t++)this.selections[t].acceptsType(e)&&n.push(this.selections[t]);return n}return this.selections}getSelection(e){for(let t=0;t<this.selections.length;t++)if(e==this.selections[t].id)return this.selections[t];console.error("[DynamicGraph] No selection with id ",e,"found!")}clearSelections(){this.selections=[]}getTimeIdForUnixTime(t){let e;for(console.log("unixTime: "),console.log(t),e=0;e<this.timeArrays.length;e++)if(t==this.timeArrays.unixTime[e])return e;console.error("Time object for unix time",t,"not found!")}addNodeOrdering(e,t){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return void console.error("Ordering",e,"already exists");t=new tu(e,t);this.nodeOrders.push(t)}setNodeOrdering(e,n){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return void(this.nodeOrders[t].order=n);console.error("Ordering",e,"does not exist")}removeNodeOrdering(e,t){for(let t=0;t<this.nodeOrders.length;t++)this.nodeOrders[t].name==e&&this.nodeOrders.splice(t,1)}getNodeOrder(e){for(let t=0;t<this.nodeOrders.length;t++)if(this.nodeOrders[t].name==e)return this.nodeOrders[t];console.error("Ordering",e,"not found!")}nodes(){return new pu(this.nodeArrays.id,this)}links(){return new yu(this.linkArrays.id,this)}times(){return new ou(this.timeArrays.id,this)}locations(){return new lu(this.locationArrays.id,this)}nodePairs(){return new cu(this.nodePairArrays.id,this)}linksBetween(t,e){let n=this.matrix[t.id()][e.id()];if(null==n&&(n=this.matrix[e.id()][t.id()]),null==n)return new yu([],this);const r=this.nodePair(n);return null!=r?new yu(r.links().toArray(),this):new yu([],this)}get(t,e){return-1<t.indexOf("nodePair")?this.nodePair(e):-1<t.indexOf("node")?this.node(e):-1<t.indexOf("link")?this.link(e):-1<t.indexOf("time")?this.time(e):-1<t.indexOf("locations")?this.location(e):void 0}getAll(t){return"nodes"==t?this.nodes():"links"==t?this.links():"times"==t?this.times():"nodePairs"==t?this.nodePairs():this.locations()}node(e){for(let t=0;t<this._nodes.length;t++)if(this._nodes[t].id()==e)return this._nodes[t]}link(e){for(let t=0;t<this._links.length;t++)if(this._links[t].id()==e)return this._links[t]}time(e){for(let t=0;t<this._times.length;t++)if(this._times[t].id()==e)return this._times[t]}location(e){for(let t=0;t<this._locations.length;t++)if(this._locations[t].id()==e)return this._locations[t]}nodePair(e){for(let t=0;t<this._nodePairs.length;t++)if(this._nodePairs[t].id()==e)return this._nodePairs[t]}getMinGranularity(){return this.gran_min}getMaxGranularity(){return this.gran_max}}class Yh{constructor(){this.id=[]}get length(){return this.id.length}}class Wh extends Yh{constructor(){super(...arguments),this.id=[],this.label=[],this.outLinks=[],this.inLinks=[],this.links=[],this.outNeighbors=[],this.inNeighbors=[],this.neighbors=[],this.selections=[],this.attributes=[],this.locations=[],this.filter=[],this.nodeType=[],this.color=[],this.shape=[]}}class Vh extends Yh{constructor(){super(...arguments),this.source=[],this.target=[],this.linkType=[],this.directed=[],this.nodePair=[],this.presence=[],this.weights=[],this.selections=[],this.filter=[],this.attributes=new Object}}class $h extends Yh{constructor(){super(...arguments),this.source=[],this.target=[],this.links=[],this.selections=[],this.filter=[]}}class Zh extends Yh{constructor(){super(...arguments),this.id=[],this.momentTime=[],this.label=[],this.unixTime=[],this.selections=[],this.filter=[],this.links=[]}}class Kh extends Yh{constructor(){super(...arguments),this.name=[],this.count=[],this.color=[],this.filter=[]}}class Qh extends Yh{constructor(){super(...arguments),this.name=[],this.count=[],this.color=[],this.filter=[]}}class Jh extends Yh{constructor(){super(...arguments),this.id=[],this.label=[],this.longitude=[],this.latitude=[],this.x=[],this.y=[],this.z=[],this.radius=[]}}class tu{constructor(t,e){this.order=[],this.name=t,this.order=e}}class eu{constructor(e){if(this._elements=[],e)for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addUnique(t){-1==this._elements.indexOf(t)&&this._elements.push(t)}add(t){this._elements.push(t)}addAll(e){for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addAllUnique(e){for(let t=0;t<e.length;t++)this.addUnique(e[t])}get length(){return this._elements.length}size(){return this._elements.length}ids(){return this._elements}removeDuplicates(){var e=this._elements.slice(0);this._elements=[];for(let t=0;t<e.length;t++)-1==this._elements.indexOf(e[t])&&this._elements.push(e[t]);return this}generic_intersection(n){const r=[];for(let e=0;e<this._elements.length;e++)for(let t=0;t<n._elements.length;t++)this._elements[e]==n._elements[t]&&r.push(this._elements[e]);return new eu(r)}}class nu extends eu{constructor(t,e,n){super(t),this.g=e,this.elementType=n}generic_filter(e){const n=[];for(let t=0;t<this._elements.length;t++)try{e(this.g.get(this.elementType,this._elements[t]))&&n.push(this._elements[t])}catch(t){}return n}generic_selected(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isSelected()&&e.push(this._elements[t])}return e}generic_visible(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isVisible()&&e.push(this._elements[t])}return e}generic_highlighted(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.get(this.elementType,this._elements[t]);null!=n&&n.isHighlighted()&&e.push(this._elements[t])}return e}generic_presentIn(e,n){const r=[];for(let t=0;t<this._elements.length;t++){const i=this.g.get(this.elementType,this._elements[t]);null!=i&&i.presentIn(e,n)&&r.push(this._elements[t])}return r}generic_sort(n,r){if(0==this._elements.length)return this;const t=this._elements.slice(0);return t.sort((t,e)=>{t=this.g.get(this.elementType,t),e=this.g.get(this.elementType,e);return null!=t&&null!=e?function(t,e,n,r){var i=t.attr(n);let s;s="string"==typeof i?t.attr(n).localeCompare(e.attr(n)):"number"==typeof i?e.attr(n)-t.attr(n):0;0==r&&(s=-s);return s}(t,e,n,r):null==t&&null==e?0:null==t?1:-1}),this._elements=t,this}generic_removeDuplicates(){const e=[];for(let t=0;t<this._elements.length;t++)-1==e.indexOf(this._elements[t])&&e.push(this._elements[t]);return this._elements=e,this}}class ru{constructor(t,e,n){this._id=t,this.type=e,this.g=n}id(){return this._id}attr(t){return this.g.attr(t,this._id,this.type)}getSelections(){return this.g.attributeArrays[this.type].selections[this._id]}addToSelection(t){this.g.attributeArrays[this.type].selections[this._id].push(t)}removeFromSelection(e){var n=this.g.attributeArrays[this.type].selections[this._id];for(let t=0;t<n.length;t++)n[t]==e&&this.g.attributeArrays[this.type].selections[this._id].splice(t,1)}inSelection(t){return-1<this.getSelections().indexOf(t)}isSelected(e){if(!e)return 0<this.getSelections().length;var n=this.g.attributeArrays[this.type].selections[this._id];for(let t=0;t<n.length;t++)if(n[t]!=this.g.defaultNodeSelection&&n[t]!=this.g.defaultLinkSelection&&n[t]==e)return!0;return!1}isHighlighted(){return this.g.isHighlighted(this._id,this.type)}isFrozen(){return this.g.isFrozen(this._id,this.type)}isFiltered(){return this.g.isFiltered(this._id,this.type)}isVisible(){var e=this.getSelections();if(0==e.length)return!0;for(let t=0;t<e.length;t++)if(e[t].filter)return!1;return!0}presentIn(e,n){const r=this.attr("presence");n=n||e;for(let t=e._id;t<=n._id;t++)if(-1<r.indexOf(t))return!0;return!1}}class iu{constructor(){this.serie={}}period(t,e){var n=t.id(),r=e.id();const i=new iu;for(const s in this.serie)parseInt(s)>=n&&parseInt(s)<=r&&(i.serie[s]=this.serie[s]);return i}set(t,e){this.serie[t.id()]=e}get(t){if(null!=this.serie[t.id()])return this.serie[t.id()]}size(){return this.toArray().length}getSerie(){return this.serie}toArray(t){const e=[];if(t=null==t?!1:t)for(const n in this.serie)e.push(this.serie[n]);else for(const r in this.serie)-1==e.indexOf(this.serie[r])&&e.push(this.serie[r]);return e}}class su{constructor(){this.serie={}}period(t,e){var n=t.id();t.id();const r=new su;for(const i in this.serie)parseInt(i)>=n&&parseInt(i)<=n&&(r.serie[i]=this.serie[i]);return r}add(t,e){null!=t&&(this.serie[t._id]||(this.serie[t._id]=[]),this.serie[t._id].push(e))}get(t){return this.serie[t._id]}toArray(){const t=[];for(const e in this.serie)t.push(this.serie[e]);return t}toFlatArray(e){null==e&&(e=!1);const n=[];for(const r in this.serie)for(let t=0;t<this.serie[r].length;t++)e&&-1!=n.indexOf(this.serie[r])||n.push(this.serie[r][t]);return n}}class ou extends nu{constructor(e,t){if(super(e,t,"time"),0<e.length&&e[0]instanceof au){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new ou(super.generic_highlighted(),this.g)}visible(){return new ou(super.generic_visible(),this.g)}selected(){return new ou(super.generic_selected(),this.g)}filter(t){return new ou(super.generic_filter(t),this.g)}presentIn(t,e){return new ou(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}links(){let e=[];for(let t=0;t<this._elements.length;t++)e=e.concat(this.g.attr("links",this._elements[t],"time"));return new yu(e,this.g)}get(t){return this.g._times[this._elements[t]]}last(){return this.g._times[this._elements[this._elements.length-1]]}toArray(){const e=[];var n=this.g._times;for(let t=0;t<this._elements.length;t++)e.push(n[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.timeArrays[e]){this.g.timeArrays[e]=[];for(let t=0;t<this.g._times.length;t++)this.g.timeArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.timeArrays[e][this._elements[t]]=n(this.g._times[this._elements[t]]);return this}unixTimes(){const e=[];for(let t=0;t<this._elements.length;t++){const n=this.g.time(this._elements[t]);null!=n&&e.push(n.unixTime())}return e}intersection(t){return new ou(this.generic_intersection(t)._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.time(this._elements[t]),t);return this}}class au extends ru{constructor(t,e){super(t,"time",e),this.getWeek=Nh("%V")}time(){return this.attr("momentTime")}moment(){return this.attr("momentTime")}label(){return this.attr("label")}unixTime(){return this.attr("unixTime")}links(){return new yu(this.attr("links"),this.g)}year(){return this.time().getUTCFullYear()}month(){return this.time().getUTCMonth()}week(){return parseInt(this.getWeek(this.time()))}day(){return this.time().getUTCDay()}hour(){return this.time().getUTCHours()}minute(){return this.time().getUTCMinutes()}second(){return this.time().getUTCSeconds()}millisecond(){return this.time().getMilliseconds()}format(t){const e=Nh(t);return e(this.time())}}class lu extends nu{constructor(e,t){if(super(e,t,"location"),0<e.length&&e[0]instanceof uu){this._elements=[];for(let t=0;t<e.length;t++)this._elements=e[t].id()}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new lu(super.generic_highlighted(),this.g)}visible(){return new lu(super.generic_visible(),this.g)}selected(){return new lu(super.generic_selected(),this.g)}filter(t){return new lu(super.generic_filter(t),this.g)}presentIn(t,e){return new lu(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._locations[this._elements[t]]}last(){return this.g._locations[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._locations[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.locationArrays[e]){this.g.locationArrays[e]=[];for(let t=0;t<this.g._locations.length;t++)this.g.locationArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.locationArrays[e][this._elements[t]]=n(this.g._locations[this._elements[t]]);return this}intersection(t){return new lu(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new lu(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.location(this._elements[t]),t);return this}}class hu extends eu{clone(){return this._elements.slice(0)}min(){this._elements=this.makeNumbers(this._elements);let e=parseInt(this._elements[0]+"");for(let t=1;t<this._elements.length;t++)null!=this._elements[t]&&(e=Math.min(e,parseInt(this._elements[t]+"")));return e}max(){let e=parseInt(this._elements[0]+"");for(let t=1;t<this._elements.length;t++)null!=this._elements[t]&&(e=Math.max(e,parseInt(this._elements[t]+"")));return e}mean(){this._elements=this.makeNumbers(this._elements);let e=0,n=0;for(let t=0;t<this._elements.length;t++)"number"==typeof this._elements[t]&&(e+=parseInt(this._elements[t]+""),n++);return e/n}sum(){let e=0;for(let t=0;t<this._elements.length;t++)"number"==typeof this._elements[t]&&(e+=parseInt(this._elements[t]+""));return e}toArray(){return this._elements.slice(0)}get(t){return this._elements[t]}forEach(e){for(let t=0;t<this._elements.length;t++)e(this._elements[t],t);return this}makeNumbers(e){if(e&&0<e.length&&"string"==typeof e[0]){const n=[];for(let t=0;t<e.length;t++)n.push(parseFloat(e[t]+""));return console.log("string array converted",n),n}return e}}class uu extends ru{constructor(t,e){super(t,"location",e)}label(){return this.attr("label")+""}longitude(){return this.attr("longitude")}latitude(){return this.attr("latitude")}x(){return this.attr("x")}y(){return this.attr("y")}z(){return this.attr("z")}radius(){return this.attr("radius")}}class cu extends nu{constructor(e,t){if(super(e,t,"nodePair"),0<e.length&&e[0]instanceof fu){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new cu(super.generic_highlighted(),this.g)}visible(){return new cu(super.generic_visible(),this.g)}selected(){return new cu(super.generic_selected(),this.g)}filter(t){return new cu(super.generic_filter(t),this.g)}presentIn(t,e){return new cu(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._nodePairs[this._elements[t]]}last(){return this.g._links[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._nodePairs[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.nodePairArrays[e]){this.g.nodePairArrays[e]=[];for(let t=0;t<this.g._nodePairs.length;t++)this.g.nodePairArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.nodePairArrays[e][this._elements[t]]=n(this.g._nodePairs[this._elements[t]]);return this}intersection(t){return new cu(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new cu(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.nodePair(this._elements[t]),t);return this}}class fu extends ru{constructor(t,e){super(t,"nodePair",e)}get source(){return this.g._nodes[this.attr("source")]}get target(){return this.g._nodes[this.attr("target")]}links(){return new yu(this.attr("links"),this.g)}nodeType(){return this.attr("nodeType")}presentIn(e,n){for(let t=0;t<this.links.length;t++)if(this.links[t].presentIn(e,n))return!0;return!1}}class du{constructor(t){this._elements=t?t.slice(0):[]}contains(t){return-1<this._elements.indexOf(t)}addUnique(t){-1==this._elements.indexOf(t)&&this._elements.push(t)}add(t){this._elements.push(t)}addAll(e){for(let t=0;t<e.length;t++)null!=e[t]&&this._elements.push(e[t])}addAllUnique(e){for(let t=0;t<e.length;t++)this.addUnique(e[t])}get length(){return this._elements.length}size(){return this._elements.length}toArray(){return this._elements.slice(0)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this._elements[t],t);return this}}function gu(e,n,r,i,s,o){let a=[],l;for(let t=0;t<n.length;t++){l=null!=o&&null!=s?i.attr(e,n[t],r).period(s,o).toArray():null!=s?[i.attr(e,n[t],r).get(s)]:i.attr(e,n[t],r).toArray();for(let t=0;t<l.length;t++)l[t]instanceof Array?a=a.concat(l[t]):-1==a.indexOf(l[t])&&a.push(l[t])}return a}class pu extends nu{constructor(e,t){if(super(e,t,"node"),0<e.length&&e[0]instanceof mu){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}else if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new pu(super.generic_highlighted(),this.g)}visible(){return new pu(super.generic_visible(),this.g)}selected(){return new pu(super.generic_selected(),this.g)}filter(t){return new pu(super.generic_filter(t),this.g)}presentIn(t,e){return new pu(super.generic_presentIn(t,e),this.g)}sort(t,e){return super.generic_sort(t,e)}label(){const e=new du;for(let t=0;t<this._elements.length;t++)e.add(""+this.g.attr("label",this._elements[t],"node"));return e}neighbors(t,e){return new pu(gu("neighbors",this._elements,"node",this.g,t,e),this.g)}links(t,e){return new yu(gu("links",this._elements,"node",this.g,t,e),this.g)}locations(t,e){return new lu(gu("locations",this._elements,"node",this.g,t,e),this.g)}nodeTypes(){const e=new du;for(let t=0;t<this._elements.length;t++)e.add(this.g.attr("nodeType",this._elements[t],"node"));return e}get(t){return this.g._nodes[this._elements[t]]}last(){return this.g._nodes[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._nodes[this._elements[t]]);return e}createAttribute(e,n){if(null==this.g.nodeArrays[e]){this.g.nodeArrays[e]=[];for(let t=0;t<this.g._nodes.length;t++)this.g.nodeArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.nodeArrays[e][this._elements[t]]=n(this.g._nodes[this._elements[t]]);return this}intersection(t){return new pu(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new pu(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.node(this._elements[t]),t);return this}}class mu extends ru{constructor(t,e){super(t,"node",e)}label(){return""+this.attr("label")}shape(){return""+this.attr("shape")}color(){return""+this.attr("color")}nodeType(){return this.attr("nodeType")}neighbors(t,e){return null!=e&&null!=t?new pu(this.attr("neighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new pu(this.attr("neighbors").get(t),this.g):new pu(this.attr("neighbors").toFlatArray(),this.g)}inNeighbors(t,e){return null!=e&&null!=t?new pu(this.attr("inNeighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new pu(this.attr("inNeighbors").get(t),this.g):new pu(this.attr("inNeighbors").toFlatArray(!0),this.g)}outNeighbors(t,e){return null!=e&&null!=t?new pu(this.attr("outNeighbors").period(t,e).toFlatArray(!0),this.g):null!=t?new pu(this.attr("outNeighbors").get(t),this.g):new pu(this.attr("outNeighbors").toFlatArray(),this.g)}links(t,e){return null!=e&&null!=t?new yu(this.attr("links").period(t,e).toFlatArray(!0),this.g):null!=t?new yu(this.attr("links").get(t),this.g):new yu(this.attr("links").toFlatArray(!0),this.g)}inLinks(t,e){return null!=e&&null!=t?new yu(this.attr("inLinks").period(t,e).toFlatArray(!0),this.g):null!=t?new yu(this.attr("inLinks").get(t),this.g):new yu(this.attr("inLinks").toFlatArray(!0),this.g)}outLinks(t,e){return null!=e&&null!=t?new yu(this.attr("outLinks").period(t,e).toFlatArray(!0),this.g):null!=t?new yu(this.attr("outLinks").get(t),this.g):new yu(this.attr("outLinks").toFlatArray(!0),this.g)}locations(t,e){return null!=e&&null!=t?new lu(this.attr("locations").period(t,e).toArray(),this.g):null!=t?new lu([this.attr("locations").get(t)],this.g):new lu(this.attr("locations").toArray(),this.g)}locationSerie(t,e){let n;n=null!=e&&null!=t?this.attr("locations").period(t,e):null!=t?this.attr("locations").get(t):this.attr("locations");var r=n.getSerie();const i=new iu;for(const a in r){var s=this.g.time(parseInt(a)),o=this.g.location(r[a]);null!=s&&null!=o&&i.set(s,o)}return i}linksBetween(e){var n,r=this.links().toArray();const i=[];for(let t=0;t<r.length;t++)(n=r[t]).source!=e&&n.target!=e||i.push(n);return new yu(i,this.g)}}class yu extends nu{constructor(e,t){if(super(e,t,"link"),0<e.length&&e[0]instanceof _u){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t].id())}if(0<e.length&&"number"==typeof e[0]){this._elements=[];for(let t=0;t<e.length;t++)this._elements.push(e[t])}}contains(t){return-1<this._elements.indexOf(t.id())}highlighted(){return new yu(super.generic_highlighted(),this.g)}visible(){return new yu(super.generic_visible(),this.g)}selected(){return new yu(super.generic_selected(),this.g)}filter(t){return new yu(super.generic_filter(t),this.g)}presentIn(t,e){return new yu(super.generic_presentIn(t,e),this.g)}sort(t){return super.generic_sort(t)}get(t){return this.g._links[this._elements[t]]}last(){return this.g._links[this._elements[this._elements.length-1]]}toArray(){const e=[];for(let t=0;t<this._elements.length;t++)e.push(this.g._links[this._elements[t]]);return e}weights(e,n){const r=new hu;for(let t=0;t<this._elements.length;t++){const i=this.g.link(t);null!=i&&r.addAll(i.weights(e,n).toArray())}return r}createAttribute(e,n){if(null==this.g.linkArrays[e]){this.g.linkArrays[e]=[];for(let t=0;t<this.g._links.length;t++)this.g.linkArrays[e].push()}for(let t=0;t<this._elements.length;t++)this.g.linkArrays[e][this._elements[t]]=n(this.g._links[this._elements[t]]);return this}linkTypes(){const e=[];var n;for(let t=0;t<this._elements.length;t++){const r=this.g.link(this._elements[t]);null!=r&&(n=r.linkType(),-1==e.indexOf(n)&&e.push(n))}return e}sources(){const e=[];let n;for(let t=0;t<this._elements.length;t++)n=this.g.link(this._elements[t]),null!=n&&-1==e.indexOf(n.source.id())&&e.push(n.source.id());return new pu(e,this.g)}targets(){const e=[];let n;for(let t=0;t<this._elements.length;t++)n=this.g.link(this._elements[t]),null!=n&&-1==e.indexOf(n.target.id())&&e.push(n.target.id());return new pu(e,this.g)}intersection(t){return new yu(this.generic_intersection(t)._elements,this.g)}removeDuplicates(){return new yu(this.generic_removeDuplicates()._elements,this.g)}forEach(e){for(let t=0;t<this._elements.length;t++)e(this.g.link(this._elements[t]),t);return this}}class _u extends ru{constructor(t,e){super(t,"link",e),this.targetNPO=void 0,this.sourceNPO=void 0}linkType(){return this.attr("linkType")}get source(){return this.g._nodes[this.attr("source")]}get target(){return this.g._nodes[this.attr("target")]}nodePair(){return this.g._nodePairs[this.attr("nodePair")]}directed(){return this.attr("directed")}other(t){return this.source==t?this.target:this.source}weights(t,e){return null==t?new hu(this.attr("weights").toArray()):null==e?new hu([this.attr("weights").get(t)]):new hu(this.attr("weights").period(t,e).toArray())}presentIn(t,e){return 0<this.weights(t,e).toArray().length}times(){return new ou(this.attr("presence"),this.g)}}class vu{constructor(){this.nodeIds=[],this.linkIds=[],this.timeIds=[],this.nodePairIds=[],this.locationIds=[]}}function wu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function xu(t,e){const n=[];for(const r in t)n.push(function(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(const r in t[n])Object.prototype.hasOwnProperty.call(t[n],r)&&(e[n][r]=t[n][r]);return e}(t[r],e()));return n}function Au(t,e,n){let r=!0;if(null==t||null==e)return t==e;if(typeof t==typeof e){if("object"!=typeof t)return 1;if(t.constructor===e.constructor){if(0<n)for(const i in t)i in e&&Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(e,i)&&!Au(t[i],e[i],n-1)&&(console.log("compareFailed for key",i,t[i],e[i]),r=!1);return r}}}function bu(t,e){return t-e}class ku{constructor(){this.nodes=[],this.links=[],this.times=[],this.nodePairs=[],this.locations=[]}}function Mu(t){let e=0;for(var n=t.getSelections();!n[e].showColor;)if(e++,e==n.length)return void(e=-1);return t.getSelections()[e].color}function Tu(t,e){return t.priority-e.priority}function Su(t){const e=new vu;return null!=t&&(t.nodes&&(e.nodeIds=t.nodes.map(t=>t.id())),t.links&&(e.linkIds=t.links.map(t=>t.id())),t.times&&(e.timeIds=t.times.map(t=>t.id())),t.nodePairs&&(e.nodePairIds=t.nodePairs.map(t=>t.id()))),e}var Nu=n(2);let Eu;"undefined"!=typeof window&&(window.dataManager||(window.dataManager=new class{constructor(t){this.keepOnlyOneSession=!1,this.session="",this.sessionDataPrefix="ncubesession",this.SEP="_",t?t.keepOnlyOneSession&&this.setOptions(t):this.keepOnlyOneSession=!1}setOptions(t){this.keepOnlyOneSession=t.keepOnlyOneSession}clearSessionData(t){var e=this.sessionDataPrefix+this.SEP+t;const n=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);!i||0!=i.indexOf(e)&&0!=i.indexOf("connectoscope1")||n.push(i)}for(let t=0;t<n.length;t++){var r=n[t];localStorage.removeItem(r)}}clearAllSessionData(){this.clearSessionData("")}isSessionCached(t,e){var n=this.sessionDataPrefix+this.SEP+t+this.SEP+e;for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r&&0==r.indexOf(n))return!0}return!1}importData(t,n){if(this.session=t,n.nodeTable||n.linkTable){n.nodeTable||console.log("[n3] Node table missing!"),n.linkTable||console.log("[n3] Link table missing!"),n.nodeSchema||console.log("[n3] Node schema missing!"),n.linkSchema||console.log("[n3] Link schema missing!");for(let e=0;e<n.nodeTable.length;e++)for(let t=0;t<n.nodeTable[e].length;t++)"string"==typeof n.nodeTable[e][t]&&(n.nodeTable[e][t]=n.nodeTable[e][t].trim());for(let e=0;e<n.linkTable.length;e++)for(let t=0;t<n.linkTable[e].length;t++)"string"==typeof n.linkTable[e][t]&&(n.linkTable[e][t]=n.linkTable[e][t].trim());if(this.isSchemaWellDefined(n)){console.log("data is well-schematized, caching dynamicGraph"),this.keepOnlyOneSession&&this.clearAllSessionData();const e=new Xh;e.initDynamicGraph(n),e.saveDynamicGraph(this)}else console.log("data is not well-schematized, so not caching dynamicGraph")}else console.log("Empty tables. No data imported.")}saveToStorage(e,n,r,i){if(null!=r){for(i=JSON.stringify(r,i);void 0===Nu.compress;);let t;t=4194304<i.length?Object(Nu.compress)(i):i,localStorage[this.sessionDataPrefix+this.SEP+this.session+this.SEP+e+this.SEP+n]=t}else console.log("attempting to save undefined value. aborting",e,n)}getFromStorage(t,e,n,r){for(;void 0===Nu.compress;);console.assert(""!=this.session);let i;i=n?function(t,e){return n(t,e,r)}:void 0;e=localStorage[this.sessionDataPrefix+this.SEP+this.session+this.SEP+t+this.SEP+e];if(e&&"undefined"!=e){console.log({storedResult:e}),console.log({compress:Nu.compress,decompress:Nu.decompress});let t;return t="true"==e||"false"!=e&&(0<="\"'[{0123456789".indexOf(e[0])?e:Object(Nu.decompress)(e)),JSON.parse(t,i)}}removeFromStorage(t,e){localStorage.removeItem(this.sessionDataPrefix+this.SEP+this.session+this.SEP+t+this.SEP+e)}getGraph(t,e){return this.session=t,this.dynamicGraph&&this.dynamicGraph.name==e||(this.dynamicGraph=new Xh,this.dynamicGraph.loadDynamicGraph(this,e)),this.dynamicGraph}isSchemaWellDefined(t){return console.log("isSchemaWellDefined"),!(t.locationTable&&!Ph(t.locationSchema.id))&&(!(0<t.nodeTable.length&&!Ph(t.nodeSchema.id))&&!(0<t.linkTable.length&&!(Ph(t.linkSchema.id)&&Ph(t.linkSchema.source)&&Ph(t.linkSchema.target))))}}),Eu=window.dataManager);let Ou;function Iu(t,e){var n=function(){const e={},t=window.location.search.replace("?","").split("&");let n,r;return t.forEach(function(t){n=t.split("="),r=decodeURIComponent(n[1]),e[n[0]]=r}),e}();return t=t||n.datasetName,Ou=e||n.session,Eu.getGraph(Ou,t)}(Fc=Fc=Fc||{})[Fc.Local=0]="Local",Fc[Fc.Global=1]="Global",Fc[Fc.Data=2]="Data";const Cu="highlight",Pu="selection",Du="timeRange",Fu="createSelection",Lu="deleteSelection",Ru="setCurrentSelectionId",Hu="setSelectionColor",Uu="selectionColoring",Bu="selectionFilter",ju="selectionPriority",zu="searchResult",qu="SET_STATE",Gu="GET_STATE",Xu="STATE_CREATED",Yu="ZOOM_INTERACTION",Wu=!0,Vu=[Cu,Pu,Du,Fu,Lu,Ru,Uu,Bu,ju,zu,Hu,qu,Gu,Xu,Yu];const $u=new class{};let Zu=-1;function Ku(t,e){$u[t]=e}window.addEventListener("storage",function(){var t=localStorage[hc];if(null!=t&&"undefined"!=t){const n=Iu();t=JSON.parse(t,function(t,e){return Gh(n,0,e)});t&&t.id!=Zu&&(Zu=t.id,cc(t))}},!1);class Qu{constructor(t){this.id=Math.random(),this.type=t,this.body=null}}function Ju(t,e){var n=Iu(),r=Su(e);null!=e&&function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return}(e),null==!e&&(t="reset"),uc(new tc(t,r));let i="auto";e&&0<n.currentSelection_id&&(i="url(/networkcube/icons/brush.png),auto");const s=document.querySelector("body");s&&(s.style.cursor=i)}class tc extends Qu{constructor(t,e){super(Cu),this.action=t,this.idCompound=null!=e?e:new vu}}function ec(t,e,n){var r=Iu();n=n||r.currentSelection_id;e=Su(e);uc(new nc(t,e,n))}class nc extends Qu{constructor(t,e,n){super(Pu),this.action=t,this.idCompound=e,this.selectionId=null!=n?n:0}}function rc(t,e,n,r){e=new ic(t,e);((r=null==r?!1:r)?uc:cc)(e)}class ic extends Qu{constructor(t,e){super(Du),this.startUnix=t,this.endUnix=e}}Qu;Qu;Qu;Qu;Qu;Qu;Qu;Qu;class sc{constructor(t,e,n){this.networkType=t,this.timeSliderStart=e,this.timeSliderEnd=n}}class oc extends sc{constructor(t,e,n,r,i,s,o,a,l,h,u,c){super(t,e,n),this.globalZoom=r,this.panOffsetGlobal=s,this.panOffsetLocal=i,this.linkOpacity=o,this.nodeOpacity=a,this.nodeSize=l,this.edgeGap=h,this.linkWidth=u,this.labellingType=c}}Qu;Qu;class ac extends Qu{constructor(t,e,n,r,i){super(Xu),this.state=t,this.bookmarkIndex=e,this.viewType=n,this.isNewBookmark=r,this.typeOfMultiView=i}}class lc extends Qu{constructor(t,e){super(Yu),this.visType=t,this.ineractionType=e}}const hc="networkcube_message";function uc(t,e){null!=e&&!e||cc(t),Wu&&(localStorage[hc]=JSON.stringify(t,function(t,e){return t=t,e=e,qh&&console.log("dgraphReplacer",t,e),e instanceof Xh?(console.log("dgraphReplacer found a DynamicGraph property",t),zh):e}))}function cc(t){const e=Iu();if($u[t.type]){if(t.type==Cu)e.highlight(t.action,t.idCompound);else if(t.type==Pu)e.selection(t.action,t.idCompound,t.selectionId);else if(t.type!=Du)if(t.type==Uu){var n=t;const i=e.getSelection(n.selectionId);null!=i&&(i.showColor=n.showColor)}else if(t.type==ju){var r=t;const s=e.getSelection(r.selectionId1),o=e.getSelection(r.selectionId2);null!=s&&(s.priority=r.priority1),null!=o&&(o.priority=r.priority2);const a=e.links().selected().toArray();for(let t=0;t<a.length;t++)a[t].getSelections().sort(Tu);const l=e.nodes().selected().toArray();for(let t=0;t<l.length;t++)l[t].getSelections().sort(Tu);const h=e.nodePairs().selected().toArray();for(let t=0;t<h.length;t++)h[t].getSelections().sort(Tu)}else if(t.type==Bu)e.filterSelection(t.selectionId,t.filter);else if(t.type==Fu)e.addSelection(t.selection.id,t.selection.color,t.selection.acceptedType,t.selection.priority);else if(t.type==Ru)e.setCurrentSelection(t.selectionId);else if(t.type==Lu)e.deleteSelection(t.selectionId);else if(t.type==zu)e.highlight("set",t.idCompound);else if(t.type==Hu){r=t;const u=e.getSelection(r.selectionId);null!=u&&(u.color=r.color)}else t.type==Gu||t.type==qu||t.type==Xu||(t.type,Yu);t=t,$u[t.type]&&null!=$u[t.type]&&$u[t.type](t)}}localStorage[hc]=void 0;class fc{constructor(t,e,n,r,i,s){this.BAR_WIDTH=5,this.RADIUS_HANDLE=5,this.LEFT=this.RADIUS_HANDLE,this.RIGHT=this.RADIUS_HANDLE,this.HEIGHT=10,this.TOP=0,this.dragEndCallBackFn=t=>null,this.x=t,this.y=e,this.width=n,this.min=r,this.max=i,this.value=this.min,this.stepWidth=s}setDragEndCallBack(t){this.dragEndCallBackFn=t}appendTo(t){this.svg=t,this.rect=this.svg._groups[0][0].getBoundingClientRect(),this.valueRange=ba().domain([0,this.width]).range([this.min,this.max]),this.drag=Lo().on("start",t=>{this.dragStart(t.sourceEvent)}).on("drag",t=>{this.dragMove(t.sourceEvent)}),this.svg=t,this.g=t.append("g").attr("height",this.HEIGHT).attr("width",this.width).attr("transform","translate("+this.x+","+this.y+")"),this.g.append("line").attr("x1",this.LEFT).attr("y1",this.TOP).attr("x2",this.width-this.RIGHT-this.LEFT).attr("y2",this.TOP).style("stroke","#aaa"),this.knob=this.g.append("circle").attr("id","#sliderKnob").attr("r",this.RADIUS_HANDLE).attr("cx",this.LEFT).attr("cy",this.TOP).attr("fill","#777").attr("onchange","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").call(this.drag)}dragStart(t){this.dragStartXMouse=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),this.dragObj=t?t.target:void 0}dragMove(t){Pi(this.dragObj).attr("cx",Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))),this.dragEnd()}dragEnd(){this.value=this.valueRange(this.knob.attr("cx")),this.dragEndCallBackFn(this.value)}getRelX(t){return(t?t.pageX:0)-this.LEFT-this.x-this.rect.left}set(t){this.knob.attr("cx",this.valueRange.invert(t))}}function dc(t,e,n,r,i,s,o,a){const l=new fc(5,r-5,n,s,o,.01),h=t.append("svg").attr("width",n+20).attr("height",r);h.append("text").attr("x",10).attr("y",r-15).text(e).style("user-select","none").attr("class","sliderLabel"),l.appendTo(h),l.set(i),l.setDragEndCallBack(a)}class gc{constructor(t,e){this.checked=!1,this.text="",this.RADIUS=7,this.clickHandler=()=>null,this.color=t,e&&(this.text=e)}appendTo(t,e,n){const r=n.append("g").attr("transform","translate("+t+","+e+")");this.circle=r.append("circle").attr("r",this.RADIUS).attr("fill","#ffffff").attr("stroke",this.color).attr("stroke-width",1).attr("cx",2*this.RADIUS).attr("cy",0).attr("oninput","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_4',document.location.pathname,this.parentElement.previousElementSibling.innerHTML ,'cx' + this.getAttribute('cx'))"),this.text&&(this.label=r.append("text").attr("x",1.4*this.RADIUS).attr("y",5).style("font-family","Helvetica").style("font-size","9pt").style("user-select","none").text(this.text[0]).on("click",()=>{this.checked=!this.checked,this.checked?(this.circle.attr("fill",this.color),this.label.attr("fill","#ffffff")):(this.circle.attr("fill","#ffffff"),this.label.attr("fill",this.color)),this.clickHandler&&this.clickHandler()}))}isChecked(){return this.checked}addClickHandler(t){this.clickHandler=t}}class pc{constructor(t,e,n,r,i,s,o){this.BAR_WIDTH=15,this.RADIUS_HANDLE=5,this.LEFT=0,this.RIGHT=0,this.HEIGHT=10,this.TOP=0,this.isInverted=!1,this.dragEndCallBackFn=()=>null,this.singleTimeStepX=0,this.dragStartXMouse=0,this.dragStartXBar=0,this.currentBarLength=0,this.x=t,this.y=e,this.width=n,this.min=r,this.max=i,this.stepWidth=s,this.hasTickmarks=null!=o&&o}setDragEndCallBack(t){this.dragEndCallBackFn=t}appendTo(t){if(this.svg=t,this.rect=this.svg._groups[0][0].getBoundingClientRect(),this.valueRange=ba().domain([0,this.width]).range([this.min,this.max]),this.svg=t,this.g=t.append("g").attr("height",this.HEIGHT).attr("width",this.width).attr("transform","translate("+this.x+","+this.y+")"),this.drag=Lo().on("start",t=>{this.dragStart(t.sourceEvent)}).on("drag",t=>{this.dragMove(t.sourceEvent)}),this.g.append("line").attr("x1",this.LEFT).attr("y1",this.TOP).attr("x2",this.width-this.RIGHT-this.LEFT).attr("y2",this.TOP).style("stroke","#aaa"),this.hasTickmarks){this.val2spaceScale=ba().domain([this.min,this.max]).range([this.LEFT,this.width-this.RIGHT-this.LEFT]);for(let t=this.min;t<=this.max;t+=this.stepWidth){var e=this.val2spaceScale(t);this.g.append("line").attr("class","rangeTick").attr("x1",e).attr("y1",this.TOP).attr("x2",e).attr("y2",this.TOP+20).style("stroke","#bbb"),this.g.append("text").attr("class","rangeTickText").attr("x",e).attr("y",this.TOP+20).text(t.toFixed(1)).style("opacity",.5).style("font-family","Helvetica").style("font-weigth","100").style("font-size","7pt")}}this.isInverted?(this.bar0=this.g.append("rect").attr("x",this.LEFT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar0").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))"),this.bar1=this.g.append("rect").attr("x",this.RIGHT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar1").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))")):(this.bar0=this.g.append("rect").attr("x",this.LEFT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",this.width-this.RIGHT-this.LEFT).style("fill","#bbb").call(this.drag).attr("id","bar0").attr("onmouseup","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))").attr("oninput","trace.event('vis_43',document.location.pathname,'Time Slider','x' + this.getAttribute('x') + 'width' + this.getAttribute('width'))"),this.bar1=null),this.circleMin=this.g.append("circle").attr("id","sliderKnobMin").attr("r",this.RADIUS_HANDLE).attr("cx",this.LEFT).attr("cy",this.TOP+this.BAR_WIDTH).attr("fill","#777").attr("onchange","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").attr("oninput","trace.event('vis_27',document.location.pathname,'Time Sliden Min','cx' + this.getAttribute('cx'))").call(this.drag),this.circleMax=this.g.append("circle").attr("id","sliderKnobMax").attr("r",this.RADIUS_HANDLE).attr("cx",this.width-this.RIGHT).attr("cy",this.TOP+this.BAR_WIDTH).attr("fill","#777").attr("onchange","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").attr("onmouseup","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").attr("oninput","trace.event('vis_28',document.location.pathname,'Time Sliden Max','cx' + this.getAttribute('cx'))").call(this.drag)}dragStart(t){var e;this.dragStartXMouse=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),this.dragObj=t?t.target:void 0,this.isInverted?(e=parseInt(this.circleMin.attr("cx")),t=parseInt(this.circleMax.attr("cx")),this.dragStartXMouse<e?(this.dragStartXBar=this.LEFT,this.currentBarLength=e-this.LEFT):this.dragStartXMouse<t?(this.dragStartXBar=e,this.currentBarLength=t-e):(this.dragStartXBar=t,this.currentBarLength=this.width-this.RIGHT-t)):(this.dragStartXBar=parseInt(this.bar0.attr("x")),this.currentBarLength=parseInt(this.bar0.attr("width")))}dragMove(t){if(this.isInverted||this.dragObj.id!=this.bar0.attr("id")){if(this.isInverted&&(this.dragObj.id==this.bar0.attr("id")||this.dragObj.id==this.bar1.attr("id")))return;this.dragObj==this.circleSingle?(this.singleTimeStepX=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t))),Pi(this.dragObj).attr("transform","translate("+this.singleTimeStepX+", 0)")):(Pi(this.dragObj).attr("cx",Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))),this.isInverted?(this.bar0.attr("x",this.LEFT).attr("width",this.circleMin.attr("cx")-this.LEFT),this.bar1.attr("x",this.circleMax.attr("cx")).attr("width",this.width-2*this.RIGHT-this.circleMax.attr("cx"))):this.bar0.attr("x",this.circleMin.attr("cx")).attr("width",this.circleMax.attr("cx")-this.circleMin.attr("cx")))}else{t=Math.max(this.LEFT,Math.min(this.width-this.RIGHT,this.getRelX(t)))-this.dragStartXMouse,t=Math.max(this.LEFT,Math.min(this.width-this.RIGHT-this.currentBarLength,this.dragStartXBar+t));this.bar0.attr("x",t),this.circleMin.attr("cx",t),this.circleMax.attr("cx",t+this.currentBarLength)}this.dragEnd()}dragEnd(){this.min=this.valueRange(this.circleMin.attr("cx")),this.max=this.valueRange(this.circleMax.attr("cx")),this.dragEndCallBackFn(this.min,this.max,this.valueRange(this.singleTimeStepX))}getRelX(t){return(t?t.pageX:0)-this.LEFT-this.x-this.rect.left}set(t,e){this.circleMin.attr("cx",this.valueRange.invert(t)),this.circleMax.attr("cx",this.valueRange.invert(e)),this.isInverted?(this.bar0.attr("x",this.LEFT).attr("width",this.circleMin.attr("cx")),this.bar1.attr("x",this.circleMax.attr("cx")).attr("width",this.width-2*this.RIGHT-this.circleMax.attr("cx"))):this.bar0.attr("x",this.circleMin.attr("cx")).attr("width",this.circleMax.attr("cx")-this.circleMin.attr("cx"))}setIsInverted(t){t!=this.isInverted&&(this.isInverted=t,this.isInverted?this.bar1=this.g.insert("rect","#bar0").attr("x",this.RIGHT).attr("y",this.TOP).attr("height",this.BAR_WIDTH).attr("width",0).style("fill","#bbb").call(this.drag).attr("id","bar1"):this.bar1.remove(),this.set(this.min,this.max))}}class mc{constructor(t,e,n){this.MARGIN_SLIDER_RIGHT=30,this.MARGIN_SLIDER_LEFT=10,this.TICK_GAP=2,this.TICK_LABEL_GAP=40,this.SLIDER_TOP=25,this.HEIGHT=200,this.callBack=void 0,this.propagateButton=new gc("#000000"),this.dgraph=t,this.times=t.times().toArray(),this.widgetWidth=e;const r=new au(0,this.dgraph);this.sliderWidth=e-this.MARGIN_SLIDER_RIGHT+5-this.MARGIN_SLIDER_LEFT-5;let i=(0!=this.times.length?this.times[this.times.length-1]:r).moment();var s,o=function(t){let e="milliseconds";switch(t){case 0:e="milliseconds";break;case 1:e="seconds";break;case 2:e="minutes";break;case 3:e="hours";break;case 4:e="days";break;case 5:e="weeks";break;case 6:e="months";break;case 7:e="years"}return e}(t.gran_min);i=i||new Date(0),i=(s=i,e=1,o=o,new Date(s.getTime()+e*Uh[o]));o=0!=this.times.length?this.times[0].unixTime():0;this.slider=new pc(this.MARGIN_SLIDER_LEFT,this.SLIDER_TOP,this.sliderWidth,o,i.valueOf(),1),n&&(this.callBack=n),this.tickScale=function(){return ea.apply(Th(el,nl,Ja,Qa,$a,Wa,Ya,Xa,Fa,Oh).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}().range([this.MARGIN_SLIDER_LEFT,this.MARGIN_SLIDER_LEFT+this.sliderWidth]).domain([o,i.valueOf()]),this.tickHeightFunction=ba().range([4,this.SLIDER_TOP-10]).domain([t.gran_min,t.gran_max])}appendTo(t,e,n){e=e||0,n=n||0;const r=t.append("g").attr("transform","translate("+e+","+n+")");r.append("g").attr("transform","translate(0,"+this.SLIDER_TOP+")").attr("class","x axis").call((n=this.tickScale,Hr(Nr,n))),this.labelStart=r.append("text").attr("y",this.SLIDER_TOP+20).style("opacity",0).style("font-family","Helvetica").style("font-weigth","100").style("font-size","8pt").style("text-anchor","end").text("").style("user-select","none").style("-webkit-user-select","none").style("-khtml-user-select","none").style("-moz-user-select","none").style("-o-user-select","none").style("user-select","none"),this.labelEnd=r.append("text").style("opacity",0).attr("y",this.SLIDER_TOP+20).style("font-family","Helvetica").style("font-weigth","100").style("font-size","8pt").style("text-anchor","start").text("").style("user-select","none").style("-webkit-user-select","none").style("-khtml-user-select","none").style("-moz-user-select","none").style("-o-user-select","none").style("user-select","none"),this.slider.appendTo(r),this.slider.setDragEndCallBack((t,e,n)=>this.updateTime(t,e,n)),this.propagateButton=new gc("#000000","Syncronize Time"),this.propagateButton.appendTo(this.sliderWidth+15,this.SLIDER_TOP+8,r)}drawTickmarks(e,n,r){let i=1;for(;Math.floor(this.sliderWidth/this.TICK_LABEL_GAP)<n.length/i&&i<100;)i++;for(let t=0;t<n.length;t++)t%i==0&&(r.append("text").attr("x",this.tickScale(n[t].unixTime())).attr("y",this.SLIDER_TOP-this.tickHeightFunction(e)).text(Bh(n[t].time(),e)).attr("id","timelabel_"+e+"_"+t).attr("class","timelabel").style("opacity",.5).style("font-family","Helvetica").style("font-weigth","100").style("font-size","7pt"),r.append("line").attr("x1",this.tickScale(n[t].unixTime())).attr("x2",this.tickScale(n[t].unixTime())).attr("y1",this.SLIDER_TOP).attr("y2",this.SLIDER_TOP-this.tickHeightFunction(e)).style("stroke","#bbb"))}formatForGranularities(t,e,n){let r="";for(;e<=n;)r+=function(t,e){switch(t){case 0:return"%S";case 1:return"%S"+(e?".":"");case 2:return"%M"+(e?":":"");case 3:return"%H";case 4:return"%D"+(e?" ":"");case 6:return"%m"+(e?"-":"");default:return"%Y"+(e?"-":"")}}(n,e<n),n--;return t.format(r.trim())}updateTime(t,e,n){function r(t){return t.toDateString()}n=Math.round(n),this.labelStart.attr("x",this.slider.valueRange.invert(t)+10).style("opacity",1).text(r(new Date(t))),this.labelEnd.attr("x",this.slider.valueRange.invert(e)+10).style("opacity",1).text(r(new Date(e))),null!=this.callBack?this.callBack(t,e,this.propagateButton.isChecked()):rc(t,e,this.times[n],this.propagateButton.isChecked())}set(t,e){this.slider.set(t,e)}}const yc="#999999";let _c=.5,vc=1,wc=1;const xc={x:5,y:4};let Ac=2;const bc=10;let kc=10;var Mc=window.innerWidth,Tc=window.innerHeight-100;const Sc=Iu(),Nc=Sc.times().toArray();let Ec=Nc[0],Oc=Nc[Nc.length-1];const Ic=Sc.directed,Cc=Sc.nodes().toArray(),Pc=Sc.nodes().toArray().sort((t,e)=>e.neighbors().length-t.neighbors().length);let Dc=Sc.links().toArray();var Fc=Sc.linkArrays;Dc=function(e,n){for(let t=0;t<e.length;t++){var r=n.directed[t];e[t].directed=!(!["yes","true"].includes(r)&&!Ic)}return e}(Dc,Fc);const Lc=new BroadcastChannel("row_hovered_over_link");Lc.onmessage=function(t){Ad(t.data.id)};const Rc=new BroadcastChannel("row_hovered_over_node");Rc.onmessage=function(t){xd(t.data.id)};let Hc=[],Uc=0;const Bc=function e(){var n=An()(_n,_n);return n.copy=function(){return t=n,e().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},function(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}.apply(n,arguments),Gn(n)}().range([1,1]);1<Sc.links().weights().max()&&Bc.range([1,3]),Bc.domain([0,Sc.links().weights().max()]),function(e){for(let t=0;t<Vu.length;t++)$u[Vu[t]]=e}(function(){Ad(),xd()}),Ku(qu,function(t){"nodelink"==t.viewType&&(t=t.state,_c=t.linkOpacity,Ad(),vc=t.nodeOpacity,xd(),kc=t.nodeSize,wd(),Ac=t.edgeGap,cd(),wc=t.linkWidth,Ad(),Uc=t.labellingType,md(),rc(t.timeSliderStart,t.timeSliderEnd,Nc[0],!0),Ad(),xd(),Df=t.panOffsetLocal,Ff=t.panOffsetGlobal,Rf=t.globalZoom,cd())}),Ku(Gu,function(t){"nodelink"==t.viewType&&function(t,e,n,r,i){uc(new ac(t,e,n,r,i),!0)}(new oc("nodelink",Ec.unixTime(),Oc.unixTime(),Rf,Df,Ff,_c,vc,kc,Ac,wc,Uc),t.bookmarkIndex,t.viewType,t.isNewBookmark,t.typeOfMultiView)});Fc=Q("#menuDiv");dc(Fc,"Link Opacity",100,35,_c,0,1,function(t){_c=t,Ad()}),dc(Fc,"Node Opacity",100,35,vc,0,1,function(t){vc=t,xd()}),dc(Fc,"Node Size",100,35,kc,.01,30,function(t){kc=t,wd()}),dc(Fc,"Edge Gap",100,35,Ac,0,10,function(t){Ac=t,cd()}),dc(Fc,"Link Width",100,35,wc,0,10,function(t){wc=t,Ad()}),function(t,e,n,r){const i=t.append("select").attr("id","selection-input_"+e).attr("onchange","trace.event('vis_9','Node Link','selection-input_"+e+"',this.value)");i.append("option").html("Chose "+e+":"),n.forEach((t,e)=>{i.append("option").attr("value",e).html(t)}),i.on("change",()=>{var t=document.getElementById("selection-input_"+e);r(t.options[t.selectedIndex].value)})}(Fc,"Labeling",["Automatic/Importance","Hide All","Show All"],t=>{Uc=parseInt(t),md()});var jc,zc,qc,Gc,Xc,Yc,Wc,Vc,$c,Zc,Kc,Qc,Jc,tf,ef,nf,rf,sf,of,af,lf,hf,uf,cf,ff,df,gf,pf,mf,yf,_f,vf,wf,xf,Af,bf,kf,Mf,Tf,Sf,Nf,Fc=Q("#timelineDiv").append("svg").attr("width",Mc).attr("height",50);let Ef;1<Sc.times().size()&&(Ef=new mc(Sc,Mc-50),Ef.appendTo(Fc),Ku("timeRange",function(t){Ec=Nc[0],Oc=Nc[Nc.length-1];let e=0;for(e;e<Nc.length;e++)if(Nc[e].unixTime()>t.startUnix){Ec=Nc[e-1];break}for(e;e<Nc.length;e++)if(Nc[e].unixTime()>t.endUnix){Oc=Nc[e-1];break}Ef.set(t.startUnix,t.endUnix),Ad(),xd()}));const Of=document.createElement("svg"),If=document.getElementById("visDiv");If&&(If.appendChild(Of),Of.outerHTML='<svg id="visSvg" width="'+(Mc-20)+'" height="'+(Tc-20)+'"></svg>'),console.log(Sc);let Cf,Pf,Df=[0,0],Ff=[0,0],Lf=!1,Rf=1,Hf=!1;const Uf=Q("#visSvg"),Bf=Uf.append("g").attr("width",Mc).attr("height",Tc),jf=Bf.append("rect").attr("id","selectionRect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).style("opacity",.2);Uf.on("mousedown",t=>{Lf=!0,Cf=[t.clientX,t.clientY]}).on("mousemove",t=>{var e,n,r;Lf&&!Hf?(Df[0]=(t.clientX-Cf[0])*Rf,Df[1]=(t.clientY-Cf[1])*Rf,Bf.attr("transform","translate("+(Ff[0]+Df[0])+","+(Ff[1]+Df[1])+")")):Lf&&(Pf=[t.clientX,t.clientY],{x:n,y:r}=Uf.node().getBoundingClientRect(),e=Math.abs(Cf[1]-Pf[1]),t=Math.min(Cf[0],Pf[0])-n-Ff[0],n=Math.abs(Cf[0]-Pf[0]),r=Math.min(Cf[1],Pf[1])-r-Ff[1],jf.attr("x",t).attr("width",n).attr("y",r).attr("height",e))}).on("mouseup",t=>{if(Lf=!1,Hf){Pf=[t.clientX,t.clientY];var{x:e,y:t}=Uf.node().getBoundingClientRect();const i=Math.abs(Cf[1]-Pf[1]),s=Math.min(Cf[0],Pf[0])-e-Ff[0],o=Math.abs(Cf[0]-Pf[0]),a=Math.min(Cf[1],Pf[1])-t-Ff[1];jf.attr("x",s).attr("width",o).attr("y",a).attr("height",i);const n=Xf.filter(function(t,e,n){const r=n[e];var[n,e]=r.getAttribute("transform").replace("translate(","").replace(")","").split(",");return+n>=s&&+n<=s+o&&+e>=a&&+e<=a+i}),r=new ku;r.nodes=n.data(),Ju("set",r)}else Ff[0]+=Df[0],Ff[1]+=Df[1]}).on("wheel.zoom",t=>{t.preventDefault(),t.stopPropagation();var e=t.deltaMode,n=t.deltaY;let r;r=1===e?16*n:0===e?n:(console.log(`Encountered wheel event with unexpected deltaMode (${e}))`),0);var i=1-r/1e3,s=[t.clientX-Ff[0],t.clientY-Ff[1]];for(let t=0;t<Cc.length;t++){const o=Cc[t];o.x=s[0]+(o.x-s[0])*i,o.y=s[1]+(o.y-s[1])*i}t={x1:s[0]+(+jf.attr("x")-s[0])*i,x2:s[0]+(+jf.attr("x")+ +jf.attr("width")-s[0])*i,y1:s[1]+(+jf.attr("y")-s[1])*i,y2:s[1]+(+jf.attr("y")+ +jf.attr("height")-s[1])*i};jf.attr("x",t.x1).attr("width",t.x2-t.x1).attr("y",t.y1).attr("height",t.y2-t.y1),cd(),uc(new lc("nodelink","zoom"),!0)}),document.addEventListener("keydown",t=>{"Shift"===t.key&&(Hf=!0)}),document.addEventListener("keyup",t=>{"Shift"===t.key&&(Hf=!1)});const zf=Bf.append("g"),qf=Bf.append("g"),Gf=Bf.append("g");let Xf,Yf,Wf,Vf,$f;const Zf=(qc=Qn(!0),Xc=tr,Yc=Gc=null,jc="function"==typeof jc?jc:void 0===jc?er:Qn(jc),zc="function"==typeof zc?zc:void 0===zc?nr:Qn(zc),Kf.x=function(t){return arguments.length?(jc="function"==typeof t?t:Qn(+t),Kf):jc},Kf.y=function(t){return arguments.length?(zc="function"==typeof t?t:Qn(+t),Kf):zc},Kf.defined=function(t){return arguments.length?(qc="function"==typeof t?t:Qn(!!t),Kf):qc},Kf.curve=function(t){return arguments.length?(Xc=t,null!=Gc&&(Yc=Xc(Gc)),Kf):Xc},Kf.context=function(t){return arguments.length?(null==t?Gc=Yc=null:Yc=Xc(Gc=t),Kf):Gc},Kf.x(function(t){return t.x}).y(function(t){return t.y}).curve(e));function Kf(t){var e,n,r,i,s=(t="object"==typeof(i=t)&&"length"in i?i:Array.from(i)).length,o=!1;for(null==Gc&&(Yc=Xc(r=Kn())),e=0;e<=s;++e)!(e<s&&qc(n=t[e],e,t))===o&&((o=!o)?Yc.lineStart():Yc.lineEnd()),o&&Yc.point(+jc(n,e,t),+zc(n,e,t));if(r)return Yc=null,r+""||null}for(let t=0;t<Cc.length;t++)Cc[t].width=2*dd(Cc[t]),Cc[t].height=2*dd(Cc[t]);function Qf(){for(var t,e=$c.length,n=0,r=0,i=0;i<e;++i)n+=(t=$c[i]).x,r+=t.y;for(n=(n/e-Wc)*Zc,r=(r/e-Vc)*Zc,i=0;i<e;++i)(t=$c[i]).x-=n,t.y-=r}function Jf(t){var e,n=Kc.length,r=Qe(Kc,sn,on).visitAfter(ed);for(tf=t,e=0;e<n;++e)Qc=Kc[e],r.visit(nd)}function td(){if(Kc){var t,e,n=Kc.length;for(ef=new Array(n),t=0;t<n;++t)e=Kc[t],ef[e.index]=+nf(e,t,Kc)}}function ed(t){var e,n,r,i,s,o=0,a=0;if(t.length){for(r=i=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(o+=e.value,a+=n,r+=n*e.x,i+=n*e.y);t.x=r/a,t.y=i/a}else for((e=t).x=e.data.x,e.y=e.data.y;o+=ef[e.data.index],e=e.next;);t.value=o}function nd(t,e,n,r){if(!t.value)return!0;var i=t.x-Qc.x,s=t.y-Qc.y,o=r-e,a=i*i+s*s;if(o*o/of<a)return a<sf&&(0===i&&(a+=(i=Xe(Jc))*i),0===s&&(a+=(s=Xe(Jc))*s),a<rf&&(a=Math.sqrt(rf*a)),Qc.vx+=i*t.value*tf/a,Qc.vy+=s*t.value*tf/a),!0;if(!(t.length||sf<=a))for(t.data===Qc&&!t.next||(0===i&&(a+=(i=Xe(Jc))*i),0===s&&(a+=(s=Xe(Jc))*s),a<rf&&(a=Math.sqrt(rf*a)));t.data!==Qc&&(o=ef[t.data.index]*tf/a,Qc.vx+=i*o,Qc.vy+=s*o),t=t.next;);}function rd(t){for(var e=0,n=af.length;e<yf;++e)for(var r,i,s,o,a,l=0;l<n;++l)r=(a=af[l]).source,s=(i=a.target).x+i.vx-r.x-r.vx||Xe(df),o=i.y+i.vy-r.y-r.vy||Xe(df),s*=a=((a=Math.sqrt(s*s+o*o))-hf[l])/a*t*lf[l],o*=a,i.vx-=s*(a=ff[l]),i.vy-=o*a,r.vx+=s*(a=1-a),r.vy+=o*a}function id(){if(uf){var t,e=uf.length,n=af.length,r=new Map(uf.map((t,e)=>[gf(t,e,uf),t])),i=0;for(cf=new Array(e);i<n;++i)(t=af[i]).index=i,"object"!=typeof t.source&&(t.source=We(r,t.source)),"object"!=typeof t.target&&(t.target=We(r,t.target)),cf[t.source.index]=(cf[t.source.index]||0)+1,cf[t.target.index]=(cf[t.target.index]||0)+1;for(i=0,ff=new Array(n);i<n;++i)t=af[i],ff[i]=cf[t.source.index]/(cf[t.source.index]+cf[t.target.index]);lf=new Array(n),sd(),hf=new Array(n),od()}}function sd(){if(uf)for(var t=0,e=af.length;t<e;++t)lf[t]=+pf(af[t],t,af)}function od(){if(uf)for(var t=0,e=af.length;t<e;++t)hf[t]=+mf(af[t],t,af)}function ad(){ld(),Sf.call("tick",vf),wf<xf&&(Tf.stop(),Sf.call("end",vf))}function ld(t){var e,n,r=_f.length;void 0===t&&(t=1);for(var i=0;i<t;++i)for(wf+=(bf-wf)*Af,Mf.forEach(function(t){t(wf)}),e=0;e<r;++e)null==(n=_f[e]).fx?n.x+=n.vx*=kf:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=kf:(n.y=n.fy,n.vy=0);return vf}function hd(){for(var t,e,n,r=0,i=_f.length;r<i;++r)(n=_f[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),(isNaN(n.x)||isNaN(n.y))&&(t=10*Math.sqrt(.5+r),e=r*an,n.x=t*Math.cos(e),n.y=t*Math.sin(e)),(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}function ud(t){return t.initialize&&t.initialize(_f,Nf),t}function cd(){Xf.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),Yf.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),Wf.attr("x",t=>t.x+xc.x).attr("y",t=>t.y+xc.y),Vf.attr("x",t=>t.x+xc.x).attr("y",t=>t.y+xc.y),bd(),$f.attr("d",t=>Zf(t.path)),md()}function fd(t){return 8.5*t.label().length+10}function dd(t){return Math.sqrt(t.links().length)*kc+1}function gd(t){let e;return","!==t.color().split("#")[0]&&(e=t.color().split("#")[1]),e=e||"#000","#"===e[0]?e:"#"+e}function pd(t){var e=t.shape(),t={circle:sr,cross:or,diamond:hr,square:dr,star:fr,triangle:pr,wye:wr};return t[e]||sr}function md(){var n,r,i,s,o,a,l,h,u,c;if(Hc=[],0==Uc){for(let e=0;e<Pc.length;e++)if(n=Pc[e],!(-1<Hc.indexOf(n)))for(let t=e+1;t<Pc.length;t++)if(r=Pc[t],!(-1<Hc.indexOf(r)))if(s=r,c=u=h=l=a=o=void 0,o=(i=n).x+fd(i)/2+bc,a=s.x+fd(s)/2+bc,l=i.x-fd(i)/2-bc,h=s.x-fd(s)/2-bc,u=i.y+9+bc,c=s.y+9+bc,i=i.y-9-bc,s=s.y-9-bc,h<o&&l<a&&i<c&&s<u||h<o&&l<a&&s<u&&i<c||l<a&&c<i&&i<c&&s<u||l<a&&u<s&&s<u&&i<c)Hc.push(r);else if(s=r,c=i=u=void 0,u=(r=n).x+fd(r)/2+bc,i=r.x-fd(r)/2-bc,c=r.y+9+bc,r=r.y-9-bc,i<s.x&&u>s.x&&c<s.y&&r>s.y){Hc.push(n);break}}else 1==Uc?Hc=Cc.slice(0):2==Uc&&(Hc=[]);Wf.attr("visibility",t=>-1<Hc.indexOf(t)?"hidden":"visible"),Vf.attr("visibility",t=>-1<Hc.indexOf(t)?"hidden":"visible")}function yd(t,e){const n=new ku;n.nodes=[e],Ju("set",n)}function _d(t,e){console.log(">>> mouseClick",e.isFrozen());const n=new ku;n.nodes=[e],e.isFrozen()?Ju("removeFreeze",n):Ju("addFreeze",n)}function vd(){Ju("reset")}function wd(){Xf.attr("d",t=>xr().size(dd(t)).type(pd(t))()),Yf.attr("r",t=>dd(t)/10+5)}function xd(){let e=!1;(0<Sc.nodes().highlighted().length||0<Sc.links().highlighted().length)&&(e=!0),Xf.style("fill",t=>{let e;return e=Mu(t),e=e||gd(t),e}).style("opacity",t=>{return t.isVisible()?e&&!(t.isHighlighted()||0<t.neighbors().highlighted().length||0<t.links().highlighted().length)?.2*vc:vc:0}),Yf.style("visibility",t=>t.isHighlighted()||0<t.links().highlighted().length||0<t.neighbors().highlighted().length?"visible":"hidden"),Wf.attr("visibility",t=>e?t.isHighlighted()||-1==Hc.indexOf(t)||0<t.links().highlighted().length?"visible":"hidden":-1==Hc.indexOf(t)?"visible":"hidden").style("color",t=>{let e;return e=t.isHighlighted()?"#ff8800":Mu(t),e=e||"#333333",e}),Vf.attr("visibility",t=>(!e||t.isHighlighted()||-1==Hc.indexOf(t)||0<t.links().highlighted().length)&&-1==Hc.indexOf(t)?"visible":"hidden")}function Ad(n){let e=!1;(0<Sc.nodes().highlighted().length||0<Sc.links().highlighted().length)&&(e=!0),$f.attr("marker-end",function(e){if(e.directed){let t=Mu(e);return t=t||yc,n&&n==e._id?"black":(e=t,Bf.append("svg:defs").append("svg:marker").attr("id",e.replace("#","")).attr("viewBox","0 -5 10 10").attr("refX",12).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").style("fill",e),"url("+e+")")}}).style("stroke",function(t){let e=Mu(t);return e=e||yc,e}).style("opacity",t=>{return t.isVisible()&&t.source.isVisible()&&t.target.isVisible()&&t.presentIn(Ec,Oc)?e&&!(t.isHighlighted()||t.source.isHighlighted()||t.target.isHighlighted())?.2*_c:_c:0}).style("stroke-width",function(t){return Bc(t.weights(Ec,Oc).mean())*wc})}function bd(){let e,n,r,i,s;for(let t=0;t<Sc.nodePairs().length;t++)if(i=Sc.nodePair(t),i)if(i.links().length<2)i.source!=i.target?i.links().toArray()[0].path=[{x:i.source.x,y:i.source.y},{x:i.target.x,y:i.target.y}]:i.links().toArray()[0].path=[{x:i.source.x,y:i.source.y},{x:i.source.x+10,y:i.source.y},{x:i.source.x+10,y:i.source.y-10},{x:i.source.x,y:i.source.y-10},{x:i.source.x,y:i.source.y}];else if(s=i.links().toArray(),i.source==i.target){var o=dd(i.source)/2+4;for(let t=0;t<s.length;t++)s[t].path=[{x:i.source.x,y:i.source.y},{x:i.source.x,y:i.source.y-o-t*Ac},{x:i.source.x+o+t*Ac,y:i.source.y-o-t*Ac},{x:i.source.x+o+t*Ac,y:i.source.y},{x:i.source.x,y:i.source.y}]}else{n=kd([-(e={x:i.target.x-i.source.x,y:i.target.y-i.source.y}).y,e.x],Ac),r=kd([e.x,e.y],Ac);for(let t=0;t<s.length;t++)s[t]&&(s[t].path=[{x:i.source.x,y:i.source.y},{x:i.source.x+r[0]+(t-s.length/2+.5)*n[0],y:i.source.y+r[1]+(t-s.length/2+.5)*n[1]},{x:i.target.x-r[0]+(t-s.length/2+.5)*n[0],y:i.target.y-r[1]+(t-s.length/2+.5)*n[1]},{x:i.target.x,y:i.target.y}])}}function kd(e,n){let r=0;for(let t=0;t<e.length;t++)r+=Math.pow(e[t],2);r=Math.sqrt(r);for(let t=0;t<e.length;t++)e[t]=e[t]/r*n;return e}_f=Cc,xf=.001,Af=(wf=1)-Math.pow(xf,1/300),bf=0,kf=.6,Mf=new Map,Tf=ie(ad),Sf=a("tick","end"),Nf=function(){let t=1;return()=>(t=(en*t+nn)%rn)/rn}(),null==_f&&(_f=[]),hd(),(vf={tick:ld,restart:function(){return Tf.restart(ad),vf},stop:function(){return Tf.stop(),vf},nodes:function(t){return arguments.length?(_f=t,hd(),Mf.forEach(ud),vf):_f},alpha:function(t){return arguments.length?(wf=+t,vf):wf},alphaMin:function(t){return arguments.length?(xf=+t,vf):xf},alphaDecay:function(t){return arguments.length?(Af=+t,vf):+Af},alphaTarget:function(t){return arguments.length?(bf=+t,vf):bf},velocityDecay:function(t){return arguments.length?(kf=1-t,vf):1-kf},randomSource:function(t){return arguments.length?(Nf=t,Mf.forEach(ud),vf):Nf},force:function(t,e){return 1<arguments.length?(null==e?Mf.delete(t):Mf.set(t,ud(e)),vf):Mf.get(t)},find:function(t,e,n){var r,i,s,o=0,a=_f.length;for(null==n?n=1/0:n*=n,o=0;o<a;++o)(r=(r=t-(i=_f[o]).x)*r+(r=e-i.y)*r)<n&&(s=i,n=r);return s},on:function(t,e){return 1<arguments.length?(Sf.on(t,e),vf):Sf.on(t)}}).force("link",(af=Dc,gf=Ye,pf=function(t){return 1/Math.min(cf[t.source.index],cf[t.target.index])},mf=Ge(30),yf=1,null==af&&(af=[]),rd.initialize=function(t,e){uf=t,df=e,id()},rd.links=function(t){return arguments.length?(af=t,id(),rd):af},rd.id=function(t){return arguments.length?(gf=t,rd):gf},rd.iterations=function(t){return arguments.length?(yf=+t,rd):yf},rd.strength=function(t){return arguments.length?(pf="function"==typeof t?t:Ge(+t),sd(),rd):pf},(rd.distance=function(t){return arguments.length?(mf="function"==typeof t?t:Ge(+t),od(),rd):mf})(30).strength(.1))).force("charge",(nf=Ge(-30),sf=(rf=1)/0,of=.81,Jf.initialize=function(t,e){Kc=t,Jc=e,td()},Jf.strength=function(t){return arguments.length?(nf="function"==typeof t?t:Ge(+t),td(),Jf):nf},Jf.distanceMin=function(t){return arguments.length?(rf=t*t,Jf):Math.sqrt(rf)},Jf.distanceMax=function(t){return arguments.length?(sf=t*t,Jf):Math.sqrt(sf)},Jf.theta=function(t){return arguments.length?(of=t*t,Jf):Math.sqrt(of)},Jf)).force("center",(Zc=1,null==(Wc=Mc/2)&&(Wc=0),null==(Vc=Tc/2)&&(Vc=0),Qf.initialize=function(t){$c=t},Qf.x=function(t){return arguments.length?(Wc=+t,Qf):Wc},Qf.y=function(t){return arguments.length?(Vc=+t,Qf):Vc},Qf.strength=function(t){return arguments.length?(Zc=+t,Qf):Zc},Qf)).on("end",()=>{!function(){const t=document.querySelector("#messageBox");t&&(t.outerHTML="")}(),xd(),Ad(),cd();const e=[];for(let t=0;t<Cc.length;t++)e.push({x:Cc[t].x,y:Cc[t].y});!function(t,e){const n=new Qu(t);n.body=e,uc(n,!0)}("layout",{coords:e})}),function(t){const e=document.querySelector(".messageBox");e&&(e.outerHTML="");const n=document.createElement("div"),r=document.getElementById("visDiv");r&&(r.appendChild(n),n.outerHTML='<div id="messageBox"><p>'+t+"</p></div>")}("Calculating<br/>layout"),Yf=zf.selectAll("nodeHighlights").data(Cc).enter().append("circle").attr("r",10).attr("class","nodeHighlights").attr("class","nodeHighlights").style("stroke","#ddd").style("fill","#eee"),Xf=qf.selectAll("nodes").data(Cc).enter().append("path").attr("d",t=>xr().type(pd(t))()).attr("class","nodes").style("fill",t=>gd(t)).on("click",_d).attr("onmouseover","trace.event('vis_30',document.location.pathname,'Node','Mouse Over')").on("mouseover",yd).on("mouseout",vd),Vf=Gf.selectAll(".nodeLabelOutlines").data(Cc).enter().append("text").attr("z",2).text(t=>t.label()).style("font-size",12).attr("visibility","hidden").attr("class","nodeLabelOutlines"),Wf=Gf.selectAll("nodeLabels").data(Cc).enter().append("text").attr("z",2).text(t=>t.label()).style("font-size",12).attr("visibility","hidden"),bd(),$f=zf.selectAll("visualLinks").data(Dc).enter().append("path").attr("d",t=>{Zf(t.path)}).attr("onclick","trace.event('vis_31',document.location.pathname,'Link','Click')").attr("onmouseover","trace.event('vis_32',document.location.pathname,'Link','Mouse Over')").style("opacity",_c).on("mouseover",(t,e)=>{Ju("set",{links:[e]})}).on("mouseout",()=>{Ju("reset")}).on("click",(t,e)=>{var n=e.getSelections(),r=Sc.getCurrentSelection();for(let t=0;t<n.length;t++)if(n[t]==r)return void ec("remove",{links:[e]});ec("add",{links:[e]})}),Ad(),xd(),wd(),cd()},2:function(t,e,n){var y,r,i,s,o,a=(y=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={},o={compressToBase64:function(t){if(null==t)return"";var e=o._compress(t,6,function(t){return r.charAt(t)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,function(t){return l(r,e.charAt(t))})},compressToUTF16:function(t){return null==t?"":o._compress(t,15,function(t){return y(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var s=e.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var e=new Array(t.length/2),n=0,r=e.length;n<r;n++)e[n]=256*t[2*n]+t[2*n+1];var i=[];return e.forEach(function(t){i.push(y(t))}),o.decompress(i.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":o._compress(t,6,function(t){return i.charAt(t)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,function(t){return l(i,e.charAt(t))}))},compress:function(t){return o._compress(t,16,function(t){return y(t)})},_compress:function(t,e,n){if(null==t)return"";for(var r,i,s,o,a={},l={},h="",u=2,c=3,f=2,d=[],g=0,p=0,m=0;m<t.length;m+=1)if(s=t.charAt(m),Object.prototype.hasOwnProperty.call(a,s)||(a[s]=c++,l[s]=!0),o=h+s,Object.prototype.hasOwnProperty.call(a,o))h=o;else{if(Object.prototype.hasOwnProperty.call(l,h)){if(h.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,p==e-1?(p=0,d.push(n(g)),g=0):p++;for(i=h.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}else{for(i=1,r=0;r<f;r++)g=g<<1|i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i=0;for(i=h.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}0==--u&&(u=Math.pow(2,f),f++),delete l[h]}else for(i=a[h],r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;0==--u&&(u=Math.pow(2,f),f++),a[o]=c++,h=String(s)}if(""!==h){if(Object.prototype.hasOwnProperty.call(l,h)){if(h.charCodeAt(0)<256){for(r=0;r<f;r++)g<<=1,p==e-1?(p=0,d.push(n(g)),g=0):p++;for(i=h.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}else{for(i=1,r=0;r<f;r++)g=g<<1|i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i=0;for(i=h.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1}0==--u&&(u=Math.pow(2,f),f++),delete l[h]}else for(i=a[h],r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;0==--u&&(u=Math.pow(2,f),f++)}for(i=2,r=0;r<f;r++)g=g<<1|1&i,p==e-1?(p=0,d.push(n(g)),g=0):p++,i>>=1;for(;;){if(g<<=1,p==e-1){d.push(n(g));break}p++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,e,n){for(var r,i,s,o,a,l,h=[],u=4,c=4,f=3,d="",g=[],p={val:n(0),position:e,index:1},m=0;m<3;m+=1)h[m]=m;for(i=0,o=Math.pow(2,2),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;switch(i){case 0:for(i=0,o=Math.pow(2,8),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;l=y(i);break;case 1:for(i=0,o=Math.pow(2,16),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;l=y(i);break;case 2:return""}for(r=h[3]=l,g.push(l);;){if(p.index>t)return"";for(i=0,o=Math.pow(2,f),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;switch(l=i){case 0:for(i=0,o=Math.pow(2,8),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;h[c++]=y(i),l=c-1,u--;break;case 1:for(i=0,o=Math.pow(2,16),a=1;a!=o;)s=p.val&p.position,p.position>>=1,0==p.position&&(p.position=e,p.val=n(p.index++)),i|=(0<s?1:0)*a,a<<=1;h[c++]=y(i),l=c-1,u--;break;case 2:return g.join("")}if(0==u&&(u=Math.pow(2,f),f++),h[l])d=h[l];else{if(l!==c)return null;d=r+r.charAt(0)}g.push(d),h[c++]=r+d.charAt(0),r=d,0==--u&&(u=Math.pow(2,f),f++)}}});function l(t,e){if(!s[t]){s[t]={};for(var n=0;n<t.length;n++)s[t][t.charAt(n)]=n}return s[t][e]}void 0===(e=function(){return a}.call(e,n,e,t))||(t.exports=e)}},r={},i.m=n,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=122);function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r});